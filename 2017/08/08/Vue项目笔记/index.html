<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="好久不见" />



<meta name="description" content="Vue 电商后台管理系统开发文档项目准备将 API Server 部署到本地 创建一个名为 itcast_mall 的数据库 将 itcast.sql 导入 itcast_mall 数据库中 解压 api-server.zip 将 api-server/config/default.json 文件中 db_config 修改为自己的配置信息 打开终端，在 api-server 目录下执行 node">
<meta name="keywords" content="Vue">
<meta property="og:type" content="article">
<meta property="og:title" content="vue项目笔记">
<meta property="og:url" content="http://yoursite.com/2017/08/08/Vue项目笔记/index.html">
<meta property="og:site_name" content="t-t">
<meta property="og:description" content="Vue 电商后台管理系统开发文档项目准备将 API Server 部署到本地 创建一个名为 itcast_mall 的数据库 将 itcast.sql 导入 itcast_mall 数据库中 解压 api-server.zip 将 api-server/config/default.json 文件中 db_config 修改为自己的配置信息 打开终端，在 api-server 目录下执行 node">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2017/08/08/Vue项目笔记/media/1534326963793.png">
<meta property="og:image" content="http://yoursite.com/2017/08/08/Vue项目笔记/media/1534327041580.png">
<meta property="og:updated_time" content="2018-11-07T00:15:27.210Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue项目笔记">
<meta name="twitter:description" content="Vue 电商后台管理系统开发文档项目准备将 API Server 部署到本地 创建一个名为 itcast_mall 的数据库 将 itcast.sql 导入 itcast_mall 数据库中 解压 api-server.zip 将 api-server/config/default.json 文件中 db_config 修改为自己的配置信息 打开终端，在 api-server 目录下执行 node">
<meta name="twitter:image" content="http://yoursite.com/2017/08/08/Vue项目笔记/media/1534326963793.png">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="t-t" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>vue项目笔记 | t-t</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">好久不见</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">学习笔记</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/Teng-TJX" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 知乎" href="#" title="知乎"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ajax/">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5C3/">H5C3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL-PHP/">MySQL PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regexp/">regexp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">好久不见</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">好久不见</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">学习笔记</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Teng-TJX" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 知乎" target="_blank" href="#" title="知乎"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-Vue项目笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/08/Vue项目笔记/" class="article-date">
      <time datetime="2017-08-08T11:11:39.000Z" itemprop="datePublished">2017-08-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      vue项目笔记
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Vue-电商后台管理系统开发文档"><a href="#Vue-电商后台管理系统开发文档" class="headerlink" title="Vue 电商后台管理系统开发文档"></a>Vue 电商后台管理系统开发文档</h1><h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><h3 id="将-API-Server-部署到本地"><a href="#将-API-Server-部署到本地" class="headerlink" title="将 API Server 部署到本地"></a>将 API Server 部署到本地</h3><ol>
<li>创建一个名为 <code>itcast_mall</code> 的数据库</li>
<li>将 <code>itcast.sql</code> 导入 <code>itcast_mall</code> 数据库中</li>
<li>解压 <code>api-server.zip</code></li>
<li>将 <code>api-server/config/default.json</code> 文件中 <code>db_config</code> 修改为自己的配置信息</li>
<li>打开终端，在 <code>api-server</code> 目录下执行 <code>node app.js</code></li>
</ol>
<h3 id="API-接口文档"><a href="#API-接口文档" class="headerlink" title="API 接口文档"></a>API 接口文档</h3><blockquote>
<p> 课程包/接口文档/docs/<strong>index.html</strong> 或者 接口文档/<strong>README.md</strong></p>
</blockquote>
<h3 id="Postman-接口测试"><a href="#Postman-接口测试" class="headerlink" title="Postman 接口测试"></a>Postman 接口测试</h3><blockquote>
<p>用Postman测试几个接口</p>
</blockquote>
<hr>
<h2 id="项目起步"><a href="#项目起步" class="headerlink" title="项目起步"></a>项目起步</h2><h3 id="vue-cli初始化项目"><a href="#vue-cli初始化项目" class="headerlink" title="vue-cli初始化项目"></a>vue-cli初始化项目</h3><p><strong>安装(如果安装过,则不用再次安装)：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g vue-cli</span><br></pre></td></tr></table></figure>
<p><strong>查看使用帮助：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue --help</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\xxx\Desktop&gt;vue --help</span><br><span class="line"></span><br><span class="line">  Usage: vue &lt;command&gt; [options]</span><br><span class="line"></span><br><span class="line">  Options:</span><br><span class="line"></span><br><span class="line">    -V, --version  output the version number</span><br><span class="line">    -h, --help     output usage information</span><br><span class="line"></span><br><span class="line">  Commands:</span><br><span class="line"></span><br><span class="line">    init           generate a new project from a template</span><br><span class="line">    list           list available official templates</span><br><span class="line">    build          prototype a new project</span><br><span class="line">    help [cmd]     display help for [cmd]</span><br></pre></td></tr></table></figure>
<p><strong>基于 <a href="https://github.com/vuejs-templates/webpack" target="_blank" rel="noopener">webpack</a> 模板初始化项目：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 基于 webpack 模板初始化一个名称为 mallmanager 的项目</span><br><span class="line">vue init webpack mallmanager</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在安装时会遇到一些选项</p>
</blockquote>
<p><img src="media\1534326963793.png" alt="1534326963793"></p>
<p>启动开发模式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd mallmanager</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>在浏览器中打开 <code>http://localhost:8080/</code> 访问测试。</p>
<h3 id="项目文件结构"><a href="#项目文件结构" class="headerlink" title="项目文件结构"></a>项目文件结构</h3><p><img src="media\1534327041580.png" alt="1534327041580"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── build</span><br><span class="line">├── config</span><br><span class="line">├── node_modules</span><br><span class="line">├── src</span><br><span class="line">│   ├── assets</span><br><span class="line">│   ├── common 存储一些公共的业务组件</span><br><span class="line">│   ├── components</span><br><span class="line">│   ├── router</span><br><span class="line">│   ├── App.vue</span><br><span class="line">│   └── main.js</span><br><span class="line">├── static</span><br><span class="line">│   └── .gitkeep</span><br><span class="line">├── .babelrc</span><br><span class="line">├── .editorconfig</span><br><span class="line">├── .eslintignore</span><br><span class="line">├── .eslintrc.js</span><br><span class="line">├── .gitignore</span><br><span class="line">├── index.html</span><br><span class="line">├── package.json</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── .postcssrc.js</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">build   webpack打包相关配置文件目录</span><br><span class="line">config  webpack打包相关配置文件目录</span><br><span class="line">docs  我们自己添加的文档目录</span><br><span class="line">  开发文档.md  案例开发步骤文档</span><br><span class="line">  接口文档.md  后台 API 接口文档</span><br><span class="line">node_modules  第三方包</span><br><span class="line">src  项目源码</span><br><span class="line">  assets  存储资源，例如 css、img、fonts</span><br><span class="line">  components  存储所有公共组件</span><br><span class="line">  router  路由</span><br><span class="line">    index.js  路由配置文件</span><br><span class="line">  App.vue  单页面应用程序的根组件</span><br><span class="line">  main.js  开机键，负责把根组件替换到根节点</span><br><span class="line">static  可以放一些静态资源</span><br><span class="line">  .gitkeep  没啥用，用来充当一个文件就可以提交我们的 static 目录，未来有了其它文件可以把它删掉</span><br><span class="line">.babelrc  es6转es5配置文件，给 babel 编译器用的</span><br><span class="line">.editorconfig  给编辑器看的</span><br><span class="line">.eslintignore  给eslint代码风格校验工具使用的，用来配置忽略代码风格校验的文件或是目录</span><br><span class="line">.eslintrc.js  给eslint代码风格校验工具使用的，用来配置代码风格校验规则</span><br><span class="line">.gitignore  给git使用的，用来配置忽略上传的文件</span><br><span class="line">.postcssrc.js  给postcss用的，postcss类似于 less、sass 预处理器</span><br><span class="line">index.html  单页面应用程序的单页</span><br><span class="line">package-lock.json  锁定第三方包的版本，以及保存包的下载地址</span><br><span class="line">package.json  项目说明，用来保存依赖项等信息</span><br><span class="line">REAMDE.md  项目说明文档</span><br></pre></td></tr></table></figure>
<h3 id="自动打开浏览器"><a href="#自动打开浏览器" class="headerlink" title="自动打开浏览器"></a>自动打开浏览器</h3><blockquote>
<p>运行npm run dev时自动打开浏览器 </p>
<p>修改package.json的script选项</p>
</blockquote>
<p><code>package.json</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"dev"</span>: <span class="string">"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js --open"</span></span><br></pre></td></tr></table></figure>
<h3 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h3><p>项目采用 <a href="https://standardjs.com/" target="_blank" rel="noopener">JavaScript Standard Style</a> 代码风格，以下是一些基本规范细则。</p>
<ul>
<li><strong>使用两个空格</strong> – 进行缩进</li>
<li><strong>字符串使用单引号</strong> – 需要转义的地方除外</li>
<li><strong>不再有冗余的变量</strong> – 这是导致 _大量_ bug 的源头!</li>
<li><strong>无分号</strong> – <a href="http://blog.izs.me/post/2353458699/an-open-letter-to-javascript-leaders-regarding" target="_blank" rel="noopener">这</a><a href="http://inimino.org/~inimino/blog/javascript_semicolons" target="_blank" rel="noopener">没什么不好。</a><a href="https://www.youtube.com/watch?v=gsfbh17Ax9I" target="_blank" rel="noopener">不骗你！</a></li>
<li>行首不要以 <code>(</code>, <code>[</code>, or <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  - 这是省略分号时**唯一**会造成问题的地方 – _工具里已加了自动检测！_</span><br><span class="line">  - [详情](https://github.com/standard/standard/blob/master/docs/RULES-zhcn.md#semicolons)</span><br><span class="line">- **关键字后加空格** `if (condition) &#123; ... &#125;`</span><br><span class="line">- **函数名后加空格** `function name (arg) &#123; ... &#125;`</span><br><span class="line">- 坚持使用全等 `===` 摒弃 `==` 一但在需要检查 `null || undefined` 时可以使用 `obj == null`。</span><br><span class="line">- 一定要处理 Node.js 中错误回调传递进来的 `err` 参数。</span><br><span class="line">- 使用浏览器全局变量时加上 `window` 前缀 – `document` 和 `navigator` 除外</span><br><span class="line">  - 避免无意中使用到了这些命名看上去很普通的全局变量， `open`, `length`, `event` 还有 `name`。</span><br><span class="line"></span><br><span class="line">说了那么多，看看[这个遵循了 Standard 规范的示例文件](https://github.com/expressjs/body-parser/blob/master/index.js) 中的代码吧。或者，这里还有[一大波使用了此规范的项目](https://raw.githubusercontent.com/standard/standard-packages/master/all.json) 代码可供参考。</span><br><span class="line"></span><br><span class="line">&gt; 在package.json的script中添加lintfixed选项</span><br><span class="line">&gt;</span><br><span class="line">&gt; 通过指令自动按照代码规范对代码进行修正</span><br><span class="line"></span><br><span class="line">`package.json` </span><br><span class="line"></span><br><span class="line">```json</span><br><span class="line"> &quot;lint&quot;: &quot;eslint --ext .js,.vue src&quot;,</span><br><span class="line"> &quot;lintfix&quot;: &quot;eslint --ext .js,.vue src --fix&quot;,</span><br></pre></td></tr></table></figure></li>
</ul>
<p><code>在终端中</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 自动修正代码</span><br><span class="line">npm run lintfix</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改完配置文件后, 要重新npm run dev</p>
</blockquote>
<h3 id="Git-版本控制"><a href="#Git-版本控制" class="headerlink" title="Git 版本控制"></a>Git 版本控制</h3><p><strong>初始化本地仓库并完成一次提交</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git status</span><br><span class="line">git add .</span><br><span class="line">git commit -m ":tada: Initial commit"</span><br></pre></td></tr></table></figure>
<p><strong>在 GitHub 上创建一个在线仓库</strong></p>
<p>将本地项目推送到 GitHub。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/你的GitHub用户名/admin-vue.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<p><strong>Git 工作流程 Workflow</strong></p>
<p><a href="http://www.ruanyifeng.com/blog/2015/12/git-workflow.html" target="_blank" rel="noopener">阮一峰 - Git 工作流程</a></p>
<p><strong>拉出分支开始工作吧</strong></p>
<ul>
<li>功能性分支</li>
<li>dev-login</li>
<li>功能分支开发完成之后测试没问题了合并到 master 分支</li>
<li>之后就可以删除掉特性分支</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev-login</span><br><span class="line">git checkout master</span><br><span class="line">git branch -d dev-login</span><br></pre></td></tr></table></figure>
<h3 id="简化代码"><a href="#简化代码" class="headerlink" title="简化代码"></a>简化代码</h3><blockquote>
<p>将vue-cli生成的无用代码进行删除</p>
</blockquote>
<h3 id="导入-ElementUI"><a href="#导入-ElementUI" class="headerlink" title="导入 ElementUI"></a>导入 ElementUI</h3><blockquote>
<p>项目使用的是<a href="http://element-cn.eleme.io/#/zh-CN/component/quickstart" target="_blank" rel="noopener">element-ui</a></p>
</blockquote>
<p>安装依赖：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-ui</span><br></pre></td></tr></table></figure>
<p>在 <code>src/main.js</code> 中加载使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'element-ui/lib/theme-chalk/index.css'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI)</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><h3 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h3><ol>
<li>新建views/login.vue</li>
<li>配置路由</li>
<li>测试组件</li>
</ol>
<p><code>views/login.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    login</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>routes/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'@/views/login'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    name: <span class="string">'home'</span>,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    redirect: &#123; <span class="attr">name</span>: <span class="string">'login'</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'login'</span>,</span><br><span class="line">    path: <span class="string">'/login'</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="布局登录页面"><a href="#布局登录页面" class="headerlink" title="布局登录页面"></a>布局登录页面</h3><blockquote>
<p>在<a href="http://element-cn.eleme.io/#/zh-CN/component/form" target="_blank" rel="noopener">element-ui</a>中找类似的效果对应的代码进行修改</p>
</blockquote>
<p><code>element-ui</code>中的代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:label-position</span>=<span class="string">"labelPosition"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span> <span class="attr">:model</span>=<span class="string">"formLabelAlign"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"名称"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formLabelAlign.name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"活动区域"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formLabelAlign.region"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"活动形式"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formLabelAlign.type"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>views/login.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-position</span>=<span class="string">"top"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span> <span class="attr">:model</span>=<span class="string">"formData"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"用户名"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.username"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"密码"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.password"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>主要按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      formData: &#123;</span></span><br><span class="line"><span class="javascript">        username: <span class="string">''</span>,</span></span><br><span class="line"><span class="javascript">        password: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="调整样式"><a href="#调整样式" class="headerlink" title="调整样式"></a>调整样式</h3><p>接下来我们开始调整 <code>/login.vue</code>  组件样式：</p>
<ul>
<li>注意：这里遵循一个原则，不要直接去使用 Element 组件自带的类名</li>
<li>如果你想为 Element 组件添加自定义样式，那么建议你给它加你自己的类名来控制</li>
</ul>
<p><code>/login.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-wrap"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">class</span>=<span class="string">"login-form"</span> <span class="attr">label-position</span>=<span class="string">"top"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span> <span class="attr">:model</span>=<span class="string">"formData"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"用户名"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.username"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"密码"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.password"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">class</span>=<span class="string">"login-button"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>/login.vue/style</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-class">.login-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#324152</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.login-wrap</span> <span class="selector-class">.login-form</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.login-wrap</span> <span class="selector-class">.login-form</span> <span class="selector-class">.login-button</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><code>App.vue</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-id">#app</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><code>在assets中添加公共样式,然后在main.js中引入</code></p>
<p><code>assets/css/style.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'@/assets/css/style.css'</span></span><br></pre></td></tr></table></figure>
<h3 id="导入axios"><a href="#导入axios" class="headerlink" title="导入axios"></a>导入axios</h3><blockquote>
<p>接下来要实现登录功能</p>
<p>登录功能要用到ajax请求, 所以我们可以先安装axios然后配置</p>
<p>这里,我们将axios改成vue插件</p>
</blockquote>
<ol>
<li>安装axios</li>
<li>新建plugins/http.js</li>
<li>导入axios</li>
<li>配置baseUrl</li>
</ol>
<p><code>assets/http.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> httpHelper = &#123;&#125;</span><br><span class="line"><span class="comment">// 配置Vue插件</span></span><br><span class="line">httpHelper.install = <span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  axios.defaults.baseURL = <span class="string">'http://127.0.0.1:8888/api/private/v1'</span></span><br><span class="line">  Vue.prototype.$http = axios</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> httpHelper</span><br></pre></td></tr></table></figure>
<p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">'@/plugins/http.js'</span></span><br><span class="line">Vue.use(http)</span><br></pre></td></tr></table></figure>
<h3 id="登录功能"><a href="#登录功能" class="headerlink" title="登录功能"></a>登录功能</h3><ol>
<li>绑定click事件</li>
<li>发送登录请求<ol>
<li>获取表单数据</li>
<li>如果登录成功,将token保存在session中并提示用户登录成功</li>
<li>如果登录失败,提示用户登录失败</li>
</ol>
</li>
</ol>
<p><code>login.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleLogin"</span> <span class="attr">class</span>=<span class="string">"login-button"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>login.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      formData: &#123;</span><br><span class="line">        username: <span class="string">''</span>,</span><br><span class="line">        password: <span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleLogin () &#123;</span><br><span class="line">      <span class="keyword">this</span>.$http.post(<span class="string">'login'</span>, <span class="keyword">this</span>.formData)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> data = res.data</span><br><span class="line">          <span class="keyword">const</span> &#123;<span class="attr">meta</span>: &#123;status, msg&#125;&#125; = data</span><br><span class="line">          <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> token = data.data.token</span><br><span class="line">            sessionStorage.setItem(<span class="string">'token'</span>, token)</span><br><span class="line">            <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用async和await"><a href="#使用async和await" class="headerlink" title="使用async和await"></a>使用async和await</h3><blockquote>
<p>将login.vue中的网络请求换一种方式去写</p>
<p>这里使用了async和await</p>
</blockquote>
<p><code>login.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> handleLogin () &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.post(<span class="string">'login'</span>, <span class="keyword">this</span>.formData)</span><br><span class="line">      <span class="keyword">const</span> data = res.data</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = data</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> token = data.data.token</span><br><span class="line">        sessionStorage.setItem(<span class="string">'token'</span>, token)</span><br><span class="line">        <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Home"><a href="#Home" class="headerlink" title="Home"></a>Home</h2><blockquote>
<p>登录成功后, 会跳转到Home页,接下来我们开始写Home页</p>
</blockquote>
<h3 id="新建home组件"><a href="#新建home组件" class="headerlink" title="新建home组件"></a>新建home组件</h3><ol>
<li>新建home.vue</li>
<li>参照<a href="http://element-cn.eleme.io/#/zh-CN/component/container" target="_blank" rel="noopener">element-ui</a>文档 找到布局容器</li>
<li>配置路由 导入home组件</li>
</ol>
<p><code>home.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-header</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span>Aside<span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>route/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'@/views/login'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@/views/home'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    name: <span class="string">'home'</span>,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'login'</span>,</span><br><span class="line">    path: <span class="string">'/login'</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="样式调整"><a href="#样式调整" class="headerlink" title="样式调整"></a>样式调整</h3><p><code>home.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-header</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span>  <span class="attr">class</span>=<span class="string">"aside"</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span>Aside<span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-main</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>home.vue/style</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#b3c0d1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.aside</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#d3dce6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e9eef3</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="头部组件"><a href="#头部组件" class="headerlink" title="头部组件"></a>头部组件</h3><h4 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构:"></a>页面结构:</h4><blockquote>
<p> 这里我们使用的是 Element 组件库自带的 <a href="http://element.eleme.io/#/zh-CN/component/layout" target="_blank" rel="noopener">Layout 布局</a> 来完成 Header 组件基本结构。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">el-header</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line"> 	   <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-content bg-purple"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"16"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-content bg-purple"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-content bg-purple"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>调整后</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-header</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-content bg-purple"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/static/logo.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"19"</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>电商后台管理系统<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>  <span class="attr">class</span>=<span class="string">"loginout"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="样式调整-1"><a href="#样式调整-1" class="headerlink" title="样式调整"></a>样式调整</h4><p><code>home.vue/style</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.middle</span>&#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.header</span> <span class="selector-class">.loginout</span>&#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><code>style.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="左侧导航菜单"><a href="#左侧导航菜单" class="headerlink" title="左侧导航菜单"></a>左侧导航菜单</h3><blockquote>
<p>这里我们使用element-ui的<a href="http://element-cn.eleme.io/#/zh-CN/component/menu" target="_blank" rel="noopener">NavMenu导航菜单</a></p>
</blockquote>
<p><code>home.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">class</span>=<span class="string">"aside"</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">default-active</span>=<span class="string">"2"</span> <span class="attr">class</span>=<span class="string">"el-menu-vertical-demo"</span> @<span class="attr">open</span>=<span class="string">"handleOpen"</span> @<span class="attr">close</span>=<span class="string">"handleClose"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>导航一<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu-item-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">   分组一</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1-1"</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1-2"</span>&gt;</span>选项2<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu-item-group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-menu-item-group</span> <span class="attr">title</span>=<span class="string">"分组2"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1-3"</span>&gt;</span>选项3<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-menu-item-group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"1-4"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">   选项4</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"1-4-1"</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-menu"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>导航二<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"3"</span> <span class="attr">disabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-document"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>导航三<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-setting"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>导航四<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改后</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">class</span>=<span class="string">"aside"</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- default-active:默认展开项</span></span><br><span class="line"><span class="comment">         :unique-opened: 只允许同时展开一项</span></span><br><span class="line"><span class="comment">         :router 开启路由模式</span></span><br><span class="line"><span class="comment">         开启后, 设置el-menu-item的index值 为路由标识</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">default-active</span>=<span class="string">"2-1"</span> <span class="attr">class</span>=<span class="string">"menu"</span> <span class="attr">:unique-opened</span>=<span class="string">"true"</span> <span class="attr">:router</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 用户管理--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">span</span>&gt;</span>用戶管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"/user"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           用戶列表</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 权限管理--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span>&gt;</span>權限管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"/roles"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-menu"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           角色列表</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"/rights"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-view"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           權限列表</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 商品管理--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span>&gt;</span>商品管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"3-1"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-menu"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           商品列表</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"3-1"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-view"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           分類參數</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"3-1"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-view"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           商品分類</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--订单管理--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">span</span>&gt;</span>訂單管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"4-1"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           訂單列表</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--数据统计--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">index</span>=<span class="string">"5"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">span</span>&gt;</span>數據統計<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">"5-1"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           數據報表</span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>home.vue/style</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.aside</span> <span class="selector-class">.menu</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="登录成功后跳转到home页"><a href="#登录成功后跳转到home页" class="headerlink" title="登录成功后跳转到home页"></a>登录成功后跳转到home页</h3><p><code>login.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略</span></span><br><span class="line"><span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> token = data.data.token</span><br><span class="line">        sessionStorage.setItem(<span class="string">'token'</span>, token)</span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123;<span class="attr">name</span>: <span class="string">'home'</span>&#125;)</span><br><span class="line">        <span class="comment">// this.$message.success(msg)</span></span><br><span class="line">      &#125; </span><br><span class="line"><span class="comment">// 省略</span></span><br></pre></td></tr></table></figure>
<h3 id="判断用户是否登录"><a href="#判断用户是否登录" class="headerlink" title="判断用户是否登录"></a>判断用户是否登录</h3><blockquote>
<p>如果用户没登录 ,就无法进入到home页</p>
<p>所以, 要进行判断验证 token</p>
</blockquote>
<p><code>home.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  beforeCreate () &#123;</span><br><span class="line">    <span class="comment">// 从session中获取token 判断是否有token</span></span><br><span class="line">    <span class="keyword">const</span> token = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">    <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">      <span class="comment">// 返回登录页</span></span><br><span class="line">      <span class="keyword">this</span>.$router.push(&#123;<span class="attr">name</span>: <span class="string">'login'</span>&#125;)</span><br><span class="line">      <span class="keyword">this</span>.message.warning(<span class="string">'请先登录'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意,这里我们无法验证效果, 因为真正的验证是在服务端去处理的,</p>
<p>我们这里先把客户端的代码写完</p>
</blockquote>
<h3 id="用户退出"><a href="#用户退出" class="headerlink" title="用户退出"></a>用户退出</h3><ol>
<li>找到退出的按钮,绑定click事件</li>
<li>在退出的事件中<ol>
<li>删除session中的token</li>
<li>跳转到登录页</li>
<li>提示用户退出成功</li>
</ol>
</li>
</ol>
<p><code>home.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"loginout"</span> @<span class="attr">click.prevent</span>=<span class="string">"handleSignout"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>home.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  handleSignout () &#123;</span><br><span class="line">    <span class="comment">// 删除session中的token</span></span><br><span class="line">    sessionStorage.clear()</span><br><span class="line">    <span class="comment">// 跳转到登录页</span></span><br><span class="line">    <span class="keyword">this</span>.$router.push(&#123;<span class="attr">name</span>: <span class="string">'login'</span>&#125;)</span><br><span class="line">    <span class="comment">// 提示</span></span><br><span class="line">    <span class="keyword">this</span>.$message.success(<span class="string">'退出成功'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 查看所有分支 *开头的表示当前分支</span><br><span class="line">git branch</span><br><span class="line">// 切换到master</span><br><span class="line">git checkout master</span><br><span class="line">// 将dev-login分支合并到当前的master分支</span><br><span class="line">git merge dev</span><br><span class="line">// 将合并后的master推送到服务器</span><br><span class="line">git push</span><br><span class="line">// 创建新分支用于开发下一个功能</span><br><span class="line">git checkout -b dev-users</span><br></pre></td></tr></table></figure>
<h2 id="用户列表"><a href="#用户列表" class="headerlink" title="用户列表"></a>用户列表</h2><blockquote>
<p>用户列表的视图在home组件中,我们先配置相应的路由</p>
</blockquote>
<h3 id="用户列表路由配置"><a href="#用户列表路由配置" class="headerlink" title="用户列表路由配置"></a>用户列表路由配置</h3><p><code>src/views/user/user.vue</code></p>
<blockquote>
<p>新建user.vue用户列表组件</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    用户列表组件</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>home.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-main</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--视图容器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>route/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略</span></span><br><span class="line"><span class="keyword">import</span> User <span class="keyword">from</span> <span class="string">'@/views/user/user'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    name: <span class="string">'home'</span>,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: Home,</span><br><span class="line">    children: [&#123;</span><br><span class="line">      name: <span class="string">'user'</span>,</span><br><span class="line">      path: <span class="string">'/user'</span>,</span><br><span class="line">      component: User</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'login'</span>,</span><br><span class="line">    path: <span class="string">'/login'</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="用户列表页面元素"><a href="#用户列表页面元素" class="headerlink" title="用户列表页面元素"></a>用户列表页面元素</h3><blockquote>
<p>用户列表页面由<a href="http://element-cn.eleme.io/#/zh-CN/component/breadcrumb" target="_blank" rel="noopener">面包屑</a>、<a href="http://element-cn.eleme.io/#/zh-CN/component/input" target="_blank" rel="noopener">搜索框</a>、<a href="http://element-cn.eleme.io/#/zh-CN/component/table" target="_blank" rel="noopener">表格</a>、分页组件</p>
</blockquote>
<p><code>user.vue/template</code> 提供容器 用到<a href="http://element-cn.eleme.io/#/zh-CN/component/card" target="_blank" rel="noopener">element-ui的卡片</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">"&#123; path: '/' &#125;"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 搜索框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"searchArea"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">"append"</span> <span class="attr">icon</span>=<span class="string">"el-icon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"tableData"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 序号 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"50"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"date"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"日期"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"姓名"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"address"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"地址"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      tableData: [&#123;</span></span><br><span class="line"><span class="javascript">        date: <span class="string">'2016-05-02'</span>,</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'王小虎'</span>,</span></span><br><span class="line"><span class="javascript">        address: <span class="string">'上海市普陀区金沙江路 1518 弄'</span></span></span><br><span class="line"><span class="undefined">      &#125;, &#123;</span></span><br><span class="line"><span class="javascript">        date: <span class="string">'2016-05-04'</span>,</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'王小虎'</span>,</span></span><br><span class="line"><span class="javascript">        address: <span class="string">'上海市普陀区金沙江路 1517 弄'</span></span></span><br><span class="line"><span class="undefined">      &#125;, &#123;</span></span><br><span class="line"><span class="javascript">        date: <span class="string">'2016-05-01'</span>,</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'王小虎'</span>,</span></span><br><span class="line"><span class="javascript">        address: <span class="string">'上海市普陀区金沙江路 1519 弄'</span></span></span><br><span class="line"><span class="undefined">      &#125;, &#123;</span></span><br><span class="line"><span class="javascript">        date: <span class="string">'2016-05-03'</span>,</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'王小虎'</span>,</span></span><br><span class="line"><span class="javascript">        address: <span class="string">'上海市普陀区金沙江路 1516 弄'</span></span></span><br><span class="line"><span class="undefined">      &#125;]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box-card</span>&#123;</span></span><br><span class="line"><span class="undefined">  height: 100%;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.searchArea</span>&#123;</span></span><br><span class="line"><span class="undefined">  margin-top: 10px;</span></span><br><span class="line"><span class="undefined">  margin-bottom: 10px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.searchArea</span> <span class="selector-class">.searchInput</span>&#123;</span></span><br><span class="line"><span class="undefined">  width: 350px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="用户列表数据渲染"><a href="#用户列表数据渲染" class="headerlink" title="用户列表数据渲染"></a>用户列表数据渲染</h3><blockquote>
<p>将表格中的假数据进行替换,</p>
<p>通过网络请求获取数据,渲染到页面中</p>
</blockquote>
<p><code>user.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card <span class="class"><span class="keyword">class</span></span>=<span class="string">"box-card"</span>&gt;</span><br><span class="line">    &lt;!-- 面包屑 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=<span class="string">"/"</span>&gt;</span><br><span class="line">        &lt;el-breadcrumb-item :to=<span class="string">"&#123; path: '/' &#125;"</span>&gt;首页&lt;<span class="regexp">/el-breadcrumb-item&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-breadcrumb-item&gt;用户管理&lt;/</span>el-breadcrumb-item&gt;</span><br><span class="line">        &lt;el-breadcrumb-item&gt;用户列表&lt;<span class="regexp">/el-breadcrumb-item&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>el-breadcrumb&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 搜索框 --&gt;</span><br><span class="line">    &lt;el-row <span class="class"><span class="keyword">class</span></span>=<span class="string">"searchArea"</span>&gt;</span><br><span class="line">      &lt;el-col :span=<span class="string">"24"</span>&gt;</span><br><span class="line">           &lt;el-input <span class="class"><span class="keyword">class</span></span>=<span class="string">"searchInput"</span> clearable placeholder=<span class="string">"请输入内容"</span>&gt;</span><br><span class="line">            &lt;el-button slot=<span class="string">"append"</span> icon=<span class="string">"el-icon-search"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="xml">           <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line">        &lt;el-button type="success" plain&gt;添加用户&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 表格 --&gt;</span><br><span class="line">       &lt;el-table</span><br><span class="line">      :data="list"</span><br><span class="line">      style="width: 100%"&gt;</span><br><span class="line">      &lt;!-- 序号 --&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">      type="index"</span><br><span class="line">      width="50"&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop="date"</span><br><span class="line">        label="日期"</span><br><span class="line">        width="180"&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop="name"</span><br><span class="line">        label="姓名"</span><br><span class="line">        width="180"&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop="address"</span><br><span class="line">        label="地址"&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    this.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async loadData () &#123;</span><br><span class="line">      const res = await this.$http.get('users?pagenum=1&amp;pagesize=10')</span><br><span class="line">      // console.log(res)</span><br><span class="line">      const data = res.data</span><br><span class="line">      const &#123; meta: &#123; msg, status &#125; &#125; = data</span><br><span class="line">      if (status === 200) &#123;</span><br><span class="line">        const &#123;data: &#123;users&#125;&#125; = data</span><br><span class="line">        this.list = users</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.box-card&#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.searchArea&#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.searchArea .searchInput&#123;</span><br><span class="line">  width: 350px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意: 此时 template中的数据还没进行替换 没使用list返回的数据</p>
<p>因为此时 网络请求失败,提示”无效的token”</p>
</blockquote>
<h3 id="验证token"><a href="#验证token" class="headerlink" title="验证token"></a>验证token</h3><blockquote>
<p> API文档中,除了登录接口, </p>
<p>其他的接口访问都是受保护的,必须提供登录成功交换到的token给服务器才可以</p>
<p>我们这里服务器要求必须在请求头中通过一个Authorization字段提供token令牌</p>
</blockquote>
<p><code>user.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">"&#123; path: '/' &#125;"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 搜索框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"searchArea"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">"append"</span> <span class="attr">icon</span>=<span class="string">"el-icon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"list"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 序号 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"50"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"username"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"姓名"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"email"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"邮箱"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"mobile"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"电话"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"mg_state"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"用户状态"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      list: []</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  created () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.loadData()</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> loadData () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'users'</span>, &#123;</span></span><br><span class="line"><span class="undefined">        headers: &#123;</span></span><br><span class="line"><span class="javascript">          Authorization: <span class="built_in">window</span>.sessionStorage.getItem(<span class="string">'token'</span>)</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        params: &#123;</span></span><br><span class="line"><span class="undefined">          pagenum: 1,</span></span><br><span class="line"><span class="undefined">          pagesize: 10</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// console.log(res)</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> data = res.data</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; msg, status &#125; &#125; = data</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> &#123;<span class="attr">data</span>: &#123;users&#125;&#125; = data</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.list = users</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$message.error(msg)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box-card</span>&#123;</span></span><br><span class="line"><span class="undefined">  height: 100%;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.searchArea</span>&#123;</span></span><br><span class="line"><span class="undefined">  margin-top: 10px;</span></span><br><span class="line"><span class="undefined">  margin-bottom: 10px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.searchArea</span> <span class="selector-class">.searchInput</span>&#123;</span></span><br><span class="line"><span class="undefined">  width: 350px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="用户列表-用户操作"><a href="#用户列表-用户操作" class="headerlink" title="用户列表-用户操作"></a>用户列表-用户操作</h3><blockquote>
<p><a href="http://element-cn.eleme.io/#/zh-CN/component/table" target="_blank" rel="noopener">自定义列</a></p>
<p>添加一列、找到按钮、选择最小按钮、删掉多余代码</p>
</blockquote>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">  <span class="attr">label</span>=<span class="string">"操作"</span> <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">icon</span>=<span class="string">"el-icon-check"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="用户列表-用户状态"><a href="#用户列表-用户状态" class="headerlink" title="用户列表-用户状态"></a>用户列表-用户状态</h3><blockquote>
<p>使用element-ui中的<a href="http://element-cn.eleme.io/#/zh-CN/component/switch" target="_blank" rel="noopener">switch</a></p>
</blockquote>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">       <span class="attr">label</span>=<span class="string">"用户状态"</span></span></span><br><span class="line"><span class="tag">       &gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- scope.row就是当前绑定的数据对象 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-switch</span></span></span><br><span class="line"><span class="tag">           <span class="attr">v-model</span>=<span class="string">"scope.row.mg_state"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">active-color</span>=<span class="string">"#13ce66"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">inactive-color</span>=<span class="string">"#ff4949"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-switch</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="用户列表-处理日期"><a href="#用户列表-处理日期" class="headerlink" title="用户列表-处理日期"></a>用户列表-处理日期</h3><blockquote>
<p>将数据中的日期格式化之后显示在视图中</p>
<p>使用moment </p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i moment</span><br></pre></td></tr></table></figure>
<p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span></span><br><span class="line"><span class="comment">// 全局过滤器</span></span><br><span class="line"><span class="comment">// 格式化日期</span></span><br><span class="line">Vue.filter(<span class="string">'fmtDate'</span>, (value, fmtString) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> moment(value).format(fmtString)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">"创建日期"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          &#123;&#123;scope.row.create_time | fmtDate('YYYY-MM-DD')&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h3><blockquote>
<p>在用户列表加载时,使用<a href="http://element-cn.eleme.io/#/zh-CN/component/loading" target="_blank" rel="noopener">加载动画,</a>提高用户体验</p>
</blockquote>
<p><code>user.vue/template</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--省略--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">       <span class="attr">v-loading</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"list"</span></span></span><br><span class="line">&lt;!--省略--&gt;</span><br></pre></td></tr></table></figure>
<p><code>user.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      loading: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line"> <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// 发送请求之前</span></span><br><span class="line">      <span class="keyword">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'users'</span>, &#123;</span><br><span class="line">        headers: &#123;</span><br><span class="line">          Authorization: <span class="built_in">window</span>.sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        params: &#123;</span><br><span class="line">          pagenum: <span class="number">1</span>,</span><br><span class="line">          pagesize: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// console.log(res)</span></span><br><span class="line">      <span class="comment">// 发送请求之后</span></span><br><span class="line">      <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">const</span> data = res.data</span><br><span class="line">      </span><br><span class="line"> <span class="comment">// 省略</span></span><br></pre></td></tr></table></figure>
<h3 id="分页处理"><a href="#分页处理" class="headerlink" title="分页处理"></a>分页处理</h3><ul>
<li><p>分页逻辑分析</p>
<ul>
<li>分页所需数据<ul>
<li>请求数据前<ul>
<li>currentPage    当前页码</li>
<li>pageSize        每页显示多少条数据</li>
</ul>
</li>
<li>请求数据后<ul>
<li>total               总共多少条数据 </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>分页步骤</p>
<ul>
<li>页面搭建</li>
<li>配置分页参数</li>
<li>当页码改变后，重新请求该页码的数据</li>
<li>当每页条数发生变化，重新请求数据</li>
</ul>
</li>
<li>页面搭建  <a href="http://element-cn.eleme.io/#/zh-CN/component/pagination" target="_blank" rel="noopener">pagination</a></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">size-change</span>=<span class="string">"handleSizeChange"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">current-change</span>=<span class="string">"handleCurrentChange"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:current-page</span>=<span class="string">"pagenum"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:page-sizes</span>=<span class="string">"[2, 4, 6, 8]"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:page-size</span>=<span class="string">"pagesize"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">layout</span>=<span class="string">"total, sizes, prev, pager, next, jumper"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:total</span>=<span class="string">"total"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    handleSizeChange(val) &#123;</span><br><span class="line">      <span class="comment">// size发生变化</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(val) &#123;</span><br><span class="line">      <span class="comment">// 页码发生变化</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`当前页: <span class="subst">$&#123;val&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">属性/方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">@size-change</td>
<td>当每页多少条数据改变执行</td>
</tr>
<tr>
<td style="text-align:left">@current-change</td>
<td>当前页码改变执行</td>
</tr>
<tr>
<td style="text-align:left">:current-page</td>
<td>数据绑定，当前页码</td>
</tr>
<tr>
<td style="text-align:left">:page-sizes</td>
<td>数据绑定，每页显示多少天数据，列表</td>
</tr>
<tr>
<td style="text-align:left">:page-size</td>
<td>数据绑定，当前每页多少条数据</td>
</tr>
<tr>
<td style="text-align:left">:total</td>
<td>数据绑定，总共多少页数据</td>
</tr>
</tbody>
</table>
<ul>
<li>配置分页参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ......</span><br><span class="line">     <span class="comment">// 分页相关的属性</span></span><br><span class="line">    pagenum: <span class="number">1</span>,</span><br><span class="line">    pagesize: <span class="number">2</span>,</span><br><span class="line">    total: <span class="number">0</span></span><br><span class="line">    .......</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 分页</span></span><br><span class="line">  handleSizeChange (val) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>)</span><br><span class="line">    <span class="keyword">this</span>.pagesize = val</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  handleCurrentChange (val) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`当前页: <span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">this</span>.pagenum = val</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loading = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'users'</span>, &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        Authorization: <span class="built_in">window</span>.sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      params: &#123;</span><br><span class="line">        pagenum: <span class="keyword">this</span>.pagenum,</span><br><span class="line">        pagesize: <span class="keyword">this</span>.pagesize</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// console.log(res)</span></span><br><span class="line">    <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">const</span> data = res.data</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; msg, status &#125; &#125; = data</span><br><span class="line">    <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; users, total &#125; &#125; = data</span><br><span class="line">      <span class="keyword">this</span>.list = users</span><br><span class="line">      <span class="comment">// 获取总共多少条数据</span></span><br><span class="line">      <span class="keyword">this</span>.total = total</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用户列表-搜索功能"><a href="#用户列表-搜索功能" class="headerlink" title="用户列表-搜索功能"></a>用户列表-搜索功能</h3><blockquote>
<p>网络请求时的query参数就是查询所需要的参数</p>
</blockquote>
<ul>
<li>业务分析</li>
<li><p>接口测试</p>
</li>
<li><p>绑定点击搜索事件处理函数</p>
</li>
<li>调用加载用户列表数据方法</li>
</ul>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 搜索框 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"searchArea"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"searchValue"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleSearch"</span> <span class="attr">slot</span>=<span class="string">"append"</span> <span class="attr">icon</span>=<span class="string">"el-icon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 省略</span></span><br><span class="line">      <span class="comment">// 搜索参数</span></span><br><span class="line">      searchValue: <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// 搜索</span></span><br><span class="line">    handleSearch () &#123;</span><br><span class="line">      <span class="keyword">this</span>.loadData()</span><br><span class="line">    &#125;,</span><br><span class="line">      </span><br><span class="line">     <span class="comment">// 省略</span></span><br><span class="line">        </span><br><span class="line">     <span class="comment">// 在请求时添加一个参数</span></span><br><span class="line">           params: &#123;</span><br><span class="line">          pagenum: <span class="keyword">this</span>.pagenum,</span><br><span class="line">          pagesize: <span class="keyword">this</span>.pagesize,</span><br><span class="line">          query: <span class="keyword">this</span>.searchValue</span><br><span class="line">        &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用户状态"><a href="#用户状态" class="headerlink" title="用户状态"></a>用户状态</h3><ul>
<li><p>业务分析</p>
</li>
<li><p>接口测试</p>
</li>
<li><p><a href="http://element-cn.eleme.io/#/zh-CN/component/switch" target="_blank" rel="noopener">Switch 开关</a> 的 change 事件</p>
</li>
<li>自定义事件绑定传参</li>
</ul>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"用户状态"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- scope.row就是当前绑定的数据对象 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-switch</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">change</span>=<span class="string">"handleSwitchChange(scope.row)"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">v-model</span>=<span class="string">"scope.row.mg_state"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">active-color</span>=<span class="string">"#13ce66"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">inactive-color</span>=<span class="string">"#ff4949"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-switch</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleSwitchChange (user) &#123;</span><br><span class="line">     <span class="keyword">this</span>.$http.defaults.headers.common[<span class="string">'Authorization'</span>] = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">     <span class="comment">// console.log(user)</span></span><br><span class="line">     <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.put(</span><br><span class="line">       <span class="string">`users/<span class="subst">$&#123;user.id&#125;</span>/state/<span class="subst">$&#123;user.mg_state&#125;</span>`</span></span><br><span class="line">     )</span><br><span class="line">     <span class="keyword">const</span> data = res.data</span><br><span class="line">     <span class="comment">// console.log(data)</span></span><br><span class="line">     <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = data</span><br><span class="line">     <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h3><ul>
<li><p>业务分析</p>
</li>
<li><p>接口测试</p>
</li>
<li>注册点击删除事件处理函数</li>
<li>使用 <a href="http://element-cn.eleme.io/#/zh-CN/component/message-box" target="_blank" rel="noopener">MessageBox 弹框</a> 给出删除操作提示</li>
<li>根据用户 id 执行删除操作</li>
<li>删除成功，重新加载当前分页数据</li>
</ul>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">"操作"</span> <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleDelete(scope.row.id)"</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">icon</span>=<span class="string">"el-icon-check"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">handleDelete (id) &#123;</span><br><span class="line">    <span class="keyword">this</span>.$confirm(<span class="string">'此操作将永久删除该文件, 是否继续?'</span>, <span class="string">'提示'</span>, &#123;</span><br><span class="line">      confirmButtonText: <span class="string">'确定'</span>,</span><br><span class="line">      cancelButtonText: <span class="string">'取消'</span>,</span><br><span class="line">      type: <span class="string">'warning'</span>,</span><br><span class="line">      center: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">      .then(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.delete(<span class="string">`users/<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">const</span> data = res.data</span><br><span class="line">        <span class="comment">// console.log(data)</span></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = data</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">// 删除成功 重新加载数据</span></span><br><span class="line">          <span class="keyword">this</span>.pagenum = <span class="number">1</span></span><br><span class="line">          <span class="keyword">this</span>.loadData()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">'success'</span>,</span><br><span class="line">            message: msg</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">          type: <span class="string">'info'</span>,</span><br><span class="line">          message: msg</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><ul>
<li><p>业务分析</p>
</li>
<li><p>接口测试</p>
</li>
<li><a href="http://element-cn.eleme.io/#/zh-CN/component/dialog" target="_blank" rel="noopener">DIalog 对话框</a></li>
<li><p>表单布局 + 数据绑定</p>
</li>
<li><p>提交表单添加用户</p>
</li>
<li>添加用户成功，重新加载用户列表</li>
</ul>
<h4 id="显示用户信息输入框"><a href="#显示用户信息输入框" class="headerlink" title="显示用户信息输入框"></a>显示用户信息输入框</h4><p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 省略 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 搜索框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"searchArea"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"searchValue"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleSearch"</span> <span class="attr">slot</span>=<span class="string">"append"</span> <span class="attr">icon</span>=<span class="string">"el-icon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"addUserDialogFormVisible = true"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加用户 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">"添加用户"</span> <span class="attr">:visible.sync</span>=<span class="string">"addUserDialogFormVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label-width</span>=<span class="string">"100px"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:model</span>=<span class="string">"formData"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"用户名"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.username"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"密码"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.password"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"邮箱"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.email"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"电话"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.mobile"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"addUserDialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"addUserDialogFormVisible = false"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 控制添加用户的对话框显示与隐藏</span></span><br><span class="line">     addUserDialogFormVisible: <span class="literal">false</span>,</span><br><span class="line">     <span class="comment">// 绑定表单数据</span></span><br><span class="line">     formData: &#123;</span><br><span class="line">       username: <span class="string">''</span>,</span><br><span class="line">       password: <span class="string">''</span>,</span><br><span class="line">       email: <span class="string">''</span>,</span><br><span class="line">       mobile: <span class="string">''</span></span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<h4 id="处理添加用户的表单提交"><a href="#处理添加用户的表单提交" class="headerlink" title="处理添加用户的表单提交"></a>处理添加用户的表单提交</h4><p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"addUserDialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"addUser"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> addUser () &#123;</span><br><span class="line">      <span class="keyword">this</span>.$http.defaults.headers.common[<span class="string">'Authorization'</span>] = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.post(<span class="string">'users'</span>, <span class="keyword">this</span>.formData)</span><br><span class="line">      <span class="keyword">const</span> data = res.data</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = data</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">201</span>) &#123;</span><br><span class="line">        <span class="comment">// 添加成功</span></span><br><span class="line">        <span class="comment">// 隐藏对话框</span></span><br><span class="line">        <span class="keyword">this</span>.addUserDialogFormVisible = <span class="literal">false</span></span><br><span class="line">        <span class="comment">// 提示成功</span></span><br><span class="line">        <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">        <span class="comment">// 重新加载数据</span></span><br><span class="line">        <span class="keyword">this</span>.loadData()</span><br><span class="line">        <span class="comment">// 清空文本输入框的值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="keyword">this</span>.formData) &#123;</span><br><span class="line">          <span class="keyword">this</span>.formData[key] = <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h3><blockquote>
<p>对新用户的信息进行验证, 使用<a href="http://element-cn.eleme.io/#/zh-CN/component/form" target="_blank" rel="noopener">表单验证</a></p>
</blockquote>
<p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/data</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 表单验证规则</span><br><span class="line">     formRules: &#123;</span><br><span class="line">       username: [&#123; required: true, message: '请输入活动名称', trigger: 'blur' &#125;,</span><br><span class="line">         &#123; min: 1, max: 5, message: '长度在 1 到 5 个字符', trigger: 'blur' &#125;],</span><br><span class="line">       password: [&#123; required: true, message: '请输入活动名称', trigger: 'blur' &#125;,</span><br><span class="line">         &#123; min: 1, max: 5, message: '长度在 1 到 5 个字符', trigger: 'blur' &#125;]</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在await最近的外层函数要加上async 否则报错</p>
</blockquote>
<h3 id="编辑用户"><a href="#编辑用户" class="headerlink" title="编辑用户"></a>编辑用户</h3><ul>
<li><p>业务分析</p>
</li>
<li><p>接口测试</p>
</li>
<li>注册点击编辑时间处理函数</li>
<li>使用 <a href="http://element-cn.eleme.io/#/zh-CN/component/dialog" target="_blank" rel="noopener">Dialog 对话框</a> 弹出编辑窗口</li>
<li>将要编辑的用户信息渲染到编辑窗口中</li>
<li>处理编辑操作</li>
</ul>
<h4 id="显示编辑的页面"><a href="#显示编辑的页面" class="headerlink" title="显示编辑的页面"></a>显示编辑的页面</h4><p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">     <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"操作"</span> <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"editUserDialogFormVisible = true"</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleDelete(scope.row.id)"</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">icon</span>=<span class="string">"el-icon-check"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--省略--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 编辑用户 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">"编辑用户"</span> <span class="attr">:visible.sync</span>=<span class="string">"editUserDialogFormVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">"myform"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">"formRules"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label-width</span>=<span class="string">"100px"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:model</span>=<span class="string">"formData"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"用户名"</span> <span class="attr">prop</span>=<span class="string">"username"</span> &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">disabled</span> <span class="attr">v-model</span>=<span class="string">"formData.username"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"邮箱"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.email"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"电话"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"formData.mobile"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"editUserDialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/data</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editUserDialogFormVisible: false</span><br></pre></td></tr></table></figure>
<h4 id="处理编辑的表单提交"><a href="#处理编辑的表单提交" class="headerlink" title="处理编辑的表单提交"></a>处理编辑的表单提交</h4><p> <code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 编辑用户 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleEdit"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleEdit () &#123;</span><br><span class="line">     <span class="keyword">this</span>.$http.defaults.headers.common[<span class="string">'Authorization'</span>] = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">     <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.put(<span class="string">`users/<span class="subst">$&#123;<span class="keyword">this</span>.formData.id&#125;</span>`</span>, &#123;</span><br><span class="line">       mobile: <span class="keyword">this</span>.formData.mobile,</span><br><span class="line">       email: <span class="keyword">this</span>.formData.email</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="keyword">const</span> data = res.data</span><br><span class="line">     <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = data</span><br><span class="line">     <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">       <span class="keyword">this</span>.editUserDialogFormVisible = <span class="literal">false</span></span><br><span class="line">       <span class="keyword">this</span>.loadData()</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="keyword">this</span>.formData) &#123;</span><br><span class="line">       	<span class="keyword">this</span>.formData[key] = <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="分配角色"><a href="#分配角色" class="headerlink" title="分配角色"></a>分配角色</h3><h4 id="显示分配角色的对话框"><a href="#显示分配角色的对话框" class="headerlink" title="显示分配角色的对话框"></a>显示分配角色的对话框</h4><p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"setRoleDialogFormVisible=true"</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">icon</span>=<span class="string">"el-icon-check"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 分配角色 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">"分配角色"</span> <span class="attr">:visible.sync</span>=<span class="string">"setRoleDialogFormVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">"100px"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"用户名"</span> <span class="attr">prop</span>=<span class="string">"username"</span> &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">disabled</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"角色"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-select</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">disabled</span> <span class="attr">label</span>=<span class="string">"请选择"</span> <span class="attr">value</span>=<span class="string">"-1"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"setRoleDialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setRoleDialogFormVisible: <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h4 id="显示角色"><a href="#显示角色" class="headerlink" title="显示角色"></a>显示角色</h4><p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 分配角色 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">"分配角色"</span> <span class="attr">:visible.sync</span>=<span class="string">"setRoleDialogFormVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">"100px"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"用户名"</span> <span class="attr">prop</span>=<span class="string">"username"</span> &gt;</span></span><br><span class="line">            &#123;&#123;currentUsername&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"角色"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">"currentRoleId"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">disabled</span> <span class="attr">label</span>=<span class="string">"请选择"</span> <span class="attr">:value</span>=<span class="string">"-1"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-for</span>=<span class="string">"item in roles"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:key</span>=<span class="string">"item.id"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:label</span>=<span class="string">"item.roleName"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:value</span>=<span class="string">"item.id"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"setRoleDialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">currentUsername: <span class="string">''</span>,</span><br><span class="line">     currentRoleId: <span class="number">-1</span>,</span><br><span class="line">     roles: []</span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取角色名称</span></span><br><span class="line">   <span class="keyword">async</span> handleShowSetRole (user) &#123;</span><br><span class="line">     <span class="keyword">this</span>.currentUsername = user.username</span><br><span class="line">     <span class="keyword">this</span>.setRoleDialogFormVisible = <span class="literal">true</span></span><br><span class="line">     <span class="keyword">this</span>.$http.defaults.headers.common[<span class="string">'Authorization'</span>] = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">     <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'roles'</span>)</span><br><span class="line">     <span class="keyword">this</span>.roles = res.data.data</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="显示当前用户的角色"><a href="#显示当前用户的角色" class="headerlink" title="显示当前用户的角色"></a>显示当前用户的角色</h4><p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res1 = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`users/<span class="subst">$&#123;user.id&#125;</span>`</span>)</span><br><span class="line">     <span class="keyword">this</span>.currentRoleId = res1.data.data.rid</span><br></pre></td></tr></table></figure>
<h4 id="分配角色功能"><a href="#分配角色功能" class="headerlink" title="分配角色功能"></a>分配角色功能</h4><p><code>user.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleSetRole"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>user.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 获取角色名称</span></span><br><span class="line">    <span class="keyword">async</span> handleShowSetRole (user) &#123;</span><br><span class="line">      <span class="keyword">this</span>.currentUserId = user.id</span><br><span class="line">       <span class="comment">// 省略代码</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// 分配角色</span></span><br><span class="line">    <span class="keyword">async</span> handleSetRole () &#123;</span><br><span class="line">      <span class="keyword">this</span>.$http.defaults.headers.common[<span class="string">'Authorization'</span>] = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.put(<span class="string">`users/<span class="subst">$&#123;<span class="keyword">this</span>.currentUserId&#125;</span>/role`</span>, &#123;</span><br><span class="line">        rid: <span class="keyword">this</span>.currentRoleId</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> data = res.data</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = data</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.setRoleDialogFormVisible = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">        <span class="comment">// 重置数据</span></span><br><span class="line">        <span class="keyword">this</span>.currentUsername = <span class="string">''</span></span><br><span class="line">        <span class="keyword">this</span>.currentRoleId = <span class="number">-1</span></span><br><span class="line">        <span class="keyword">this</span>.currentUserId = <span class="number">-1</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><h3 id="权限列表展示"><a href="#权限列表展示" class="headerlink" title="权限列表展示"></a>权限列表展示</h3><ol>
<li>新建views/roles/rights.vue</li>
<li>在index.js中的home下配置路由</li>
</ol>
<p><code>roles/right.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">"&#123; path: '/' &#125;"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>权限管理<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>权限列表<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">       <span class="attr">class</span>=<span class="string">"td"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">height</span>=<span class="string">"450px"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">border</span></span></span><br><span class="line"><span class="tag">       <span class="attr">stripe</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"list"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">       <span class="attr">type</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"50"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"authName"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"权限名称"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"path"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"路径"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"level"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"层级"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === '0'"</span>&gt;</span>一级<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === '1'"</span>&gt;</span>二级<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"scope.row.level === '2'"</span>&gt;</span>三级<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>roles/right.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">this</span>.$http.defaults.headers.common[<span class="string">'Authorization'</span>] = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'rights/list'</span>)</span><br><span class="line">      <span class="keyword">const</span> data = res.data</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="keyword">this</span>.list = data.data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>roles/right.vue/style</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-card</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* overflow: auto; */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.td</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="设置axios拦截器"><a href="#设置axios拦截器" class="headerlink" title="设置axios拦截器"></a>设置axios拦截器</h3><p><code>plugins/http.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const httpHelper = &#123;&#125;</span></span><br><span class="line"><span class="comment">// 配置Vue插件</span></span><br><span class="line"><span class="comment">// httpHelper.install = function fn (Vue) &#123;</span></span><br><span class="line"><span class="comment">//   axios.defaults.baseURL = 'http://127.0.0.1:8888/api/private/v1'</span></span><br><span class="line"><span class="comment">//   Vue.prototype.$http = axios</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">const</span> httpAxios = &#123;&#125;</span><br><span class="line">httpAxios.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">    baseURL: <span class="string">'http://127.0.0.1:8888/api/private/v1'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  instance.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (config.url.toLowerCase() !== <span class="string">'login'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> token = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">      config.headers.Authorization = token</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  instance.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125;)</span><br><span class="line">  Vue.prototype.$http = instance</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// export default httpHelper</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> httpAxios</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="角色列表展示"><a href="#角色列表展示" class="headerlink" title="角色列表展示"></a>角色列表展示</h3><ol>
<li>新建views/roles/roles.vue</li>
<li>配置路由</li>
<li>完成roles.vue的展示</li>
</ol>
<p><code>roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;el-breadcrumb separator="/"&gt;</span></span><br><span class="line"><span class="comment">          &lt;el-breadcrumb-item :to="&#123; path: '/' &#125;"&gt;首页&lt;/el-breadcrumb-item&gt;</span></span><br><span class="line"><span class="comment">          &lt;el-breadcrumb-item&gt;权限管理&lt;/el-breadcrumb-item&gt;</span></span><br><span class="line"><span class="comment">          &lt;el-breadcrumb-item&gt;角色列表&lt;/el-breadcrumb-item&gt;</span></span><br><span class="line"><span class="comment">      &lt;/el-breadcrumb&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cus-Breadcrumb</span> <span class="attr">level1</span>=<span class="string">'权限管理'</span> <span class="attr">level2</span>=<span class="string">'角色列表'</span>&gt;</span><span class="tag">&lt;/<span class="name">cus-Breadcrumb</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"row-add"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>添加角色<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"list"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">       <span class="attr">type</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"50"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"roleName"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"角色名称"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"roleDesc"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"角色描述"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"操作"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>roles/roles.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'roles'</span>)</span><br><span class="line">      <span class="keyword">const</span> &#123; data, <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = resData</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.list = data</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>roles/roles.vue/style</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-class">.row-add</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="自定义面包屑组件"><a href="#自定义面包屑组件" class="headerlink" title="自定义面包屑组件"></a>自定义面包屑组件</h3><ol>
<li>新建components/common/cusBreadcrumb.vue</li>
<li>在main.js中引入cusBreadcrumb.vue 并注册全局组件</li>
<li>在roles.vue中使用自定义面包屑组件</li>
</ol>
<p><code>components/common/cusBreadcrumb.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">"&#123; path: '/' &#125;"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>&#123;&#123;this.level1&#125;&#125;<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-breadcrumb-item</span>&gt;</span>&#123;&#123;this.level2&#125;&#125;<span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'cusBreadcrumb'</span>,</span></span><br><span class="line"><span class="javascript">  props: [<span class="string">'level1'</span>, <span class="string">'level2'</span>]</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cus-Breadcrumb</span> <span class="attr">level1</span>=<span class="string">'权限管理'</span> <span class="attr">level2</span>=<span class="string">'角色列表'</span>&gt;</span><span class="tag">&lt;/<span class="name">cus-Breadcrumb</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="角色列表-操作-加载动画"><a href="#角色列表-操作-加载动画" class="headerlink" title="角色列表-操作+加载动画"></a>角色列表-操作+加载动画</h3><p><code>views/roles/roles.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">       <span class="attr">label</span>=<span class="string">"操作"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-button</span>   <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">icon</span>=<span class="string">"el-icon-check"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      loading: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'roles'</span>)</span><br><span class="line">      <span class="keyword">const</span> &#123; data, <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = resData</span><br><span class="line">      <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.list = data</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="表格展开列-三级权限"><a href="#表格展开列-三级权限" class="headerlink" title="表格展开列+三级权限"></a>表格<a href="http://element.eleme.io/#/zh-CN/component/table#zhan-kai-xing" target="_blank" rel="noopener">展开列</a>+三级权限</h3><blockquote>
<p>用到element-ui的展开和<a href="http://element.eleme.io/#/zh-CN/component/tag#tag-biao-qian" target="_blank" rel="noopener">tag标签</a></p>
</blockquote>
<p><code>views/roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 展开列 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">"expand"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- &lt;el-tag @click="handleClose" type="success"&gt;&lt;/el-tag&gt; --&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 一级权限 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"level1"</span> <span class="attr">v-for</span>=<span class="string">"item1 in scope.row.children"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:key</span>=<span class="string">"item1.id"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">closable</span>&gt;</span>&#123;&#123;item1.authName&#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-arrow-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- 二级权限 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"20"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">v-for</span>=<span class="string">"item2 in item1.children"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">"item2.id"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">closable</span> <span class="attr">type</span>=<span class="string">"success"</span>&gt;</span>&#123;&#123;item2.authName&#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-arrow-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 三级权限 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"20"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">class</span>=<span class="string">"level3"</span> <span class="attr">closable</span> <span class="attr">type</span>=<span class="string">"warning"</span> <span class="attr">v-for</span>=<span class="string">"item3 in item2.children"</span> <span class="attr">:key</span>=<span class="string">"item3.id"</span>&gt;</span>&#123;&#123;item3.authName&#125;&#125;<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>views/roles/roles.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleClose () &#123;</span><br><span class="line"></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="无权限的处理"><a href="#无权限的处理" class="headerlink" title="无权限的处理"></a>无权限的处理</h3><p><code>views/roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 未设置权限的展示 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">v-if</span>=<span class="string">"scope.row.children.length == '0'"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span>未分配权限<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="删除用户的权限"><a href="#删除用户的权限" class="headerlink" title="删除用户的权限"></a>删除用户的权限</h3><ol>
<li>给三级权限设置@click事件</li>
<li>传递scope.row和当前点击tag的id</li>
</ol>
<p><code>views/roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@close="handleClose(scope.row.id, item1.id)"</span><br></pre></td></tr></table></figure>
<p><code>views/roles/roles.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleClose (roleId, rightId) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.delete(<span class="string">`roles/<span class="subst">$&#123;roleId&#125;</span>/rights/<span class="subst">$&#123;rightId&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = resData</span><br><span class="line">    <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">      <span class="keyword">this</span>.loadData()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除用户权限-优化"><a href="#删除用户权限-优化" class="headerlink" title="删除用户权限-优化"></a>删除用户权限-优化</h3><p><code>views/roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@close="handleClose(scope.row, item1.id)"</span><br></pre></td></tr></table></figure>
<p><code>views/roles/roles.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleClose (role, rightId) &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(role)</span><br><span class="line">     <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.delete(<span class="string">`roles/<span class="subst">$&#123;role.id&#125;</span>/rights/<span class="subst">$&#123;rightId&#125;</span>`</span>)</span><br><span class="line">     <span class="keyword">const</span> &#123; data, <span class="attr">meta</span>: &#123; status, msg &#125; &#125; = resData</span><br><span class="line">     <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">       role.children = data</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="分配权限-显示树形结构"><a href="#分配权限-显示树形结构" class="headerlink" title="分配权限-显示树形结构"></a>分配权限-显示树形结构</h3><ol>
<li>弹出分配权限的对话框</li>
<li>对话框中使用<a href="http://element.eleme.io/#/zh-CN/component/tree#tree-shu-xing-kong-jian" target="_blank" rel="noopener">树形结构</a></li>
</ol>
<p><code>views/roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分配权限对话框 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">     <span class="attr">title</span>=<span class="string">"分配权限"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">width</span>=<span class="string">"30%"</span></span></span><br><span class="line"><span class="tag">     @<span class="attr">open</span>=<span class="string">"handleOpenDialog"</span></span></span><br><span class="line"><span class="tag">     &gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">       <span class="attr">:data</span>=<span class="string">"treedata"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">:props</span>=<span class="string">"defaultProps"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">       <span class="attr">default-expand-all</span>&gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"dialogVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"dialogVisible = false"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>views/roles/roles.vue/script/data</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">treedata: [],</span><br><span class="line">     defaultProps: &#123;</span><br><span class="line">       children: 'children',</span><br><span class="line">       label: 'authName'</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<p><code>views/roles/roles.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打开对话框时,执行</span></span><br><span class="line">   <span class="keyword">async</span> handleOpenDialog () &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">11</span>)</span><br><span class="line">     <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'rights/tree'</span>)</span><br><span class="line">     <span class="keyword">const</span> &#123; data &#125; = resData</span><br><span class="line">     <span class="keyword">this</span>.treedata = data</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="分类权限-获取选中项节点"><a href="#分类权限-获取选中项节点" class="headerlink" title="分类权限-获取选中项节点"></a>分类权限-获取选中项节点</h3><blockquote>
<p>当前打开的用户的权限并不是所有权限都有</p>
<p>要展示每个用户对应的权限</p>
</blockquote>
<p><code>roles/roles.vue/script/data</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>roles/roles.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">handleShowRightsDialog (role) &#123;</span><br><span class="line">     <span class="keyword">this</span>.dialogVisible = <span class="literal">true</span></span><br><span class="line">     <span class="comment">// console.log(role)</span></span><br><span class="line">     <span class="keyword">const</span> arr = []</span><br><span class="line">     role.children.forEach(<span class="function">(<span class="params">item1</span>) =&gt;</span> &#123;</span><br><span class="line">       item1.children.forEach(<span class="function">(<span class="params">item2</span>) =&gt;</span> &#123;</span><br><span class="line">         item2.children.forEach(<span class="function">(<span class="params">item3</span>) =&gt;</span> &#123;</span><br><span class="line">           arr.push(item3.id)</span><br><span class="line">         &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="keyword">this</span>.checkedList = arr</span><br><span class="line">     <span class="comment">// console.log(this.checkedList)</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><code>roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">          <span class="tag">&lt;<span class="name">el-button</span>  @<span class="attr">click</span>=<span class="string">"handleShowRightsDialog(scope.row)"</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">icon</span>=<span class="string">"el-icon-check"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 分配权限对话框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">open</span>=<span class="string">"handleOpenDialog"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"分配权限"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-loading</span>=<span class="string">"loadingTree"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:data</span>=<span class="string">"treedata"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:props</span>=<span class="string">"defaultProps"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">node-key</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:default-checked-keys</span>=<span class="string">"checkedList"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">default-expand-all</span>&gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"dialogVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"dialogVisible = false"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="分配权限-更新权限"><a href="#分配权限-更新权限" class="headerlink" title="分配权限-更新权限"></a>分配权限-更新权限</h3><p><code>roles/roles.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分配权限对话框 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">     @<span class="attr">open</span>=<span class="string">"handleOpenDialog"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">title</span>=<span class="string">"分配权限"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span></span></span><br><span class="line"><span class="tag">     &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">       <span class="attr">ref</span>=<span class="string">"tree"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">v-loading</span>=<span class="string">"loadingTree"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">:data</span>=<span class="string">"treedata"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">:props</span>=<span class="string">"defaultProps"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">node-key</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">:default-checked-keys</span>=<span class="string">"checkedList"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">       <span class="attr">default-expand-all</span>&gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"dialogVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"handleSetRoles"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>roles/roles.vue/script/data</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 记录当前修改权限的id</span><br><span class="line">     currentRoleId: -1</span><br></pre></td></tr></table></figure>
<p><code>roles/roles.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击确定按钮,更新用户权限</span></span><br><span class="line">   <span class="keyword">async</span> handleSetRoles () &#123;</span><br><span class="line">     <span class="comment">// 获取被选这个权限的id</span></span><br><span class="line">     <span class="keyword">const</span> checkedKeys = <span class="keyword">this</span>.$refs.tree.getCheckedKeys()</span><br><span class="line">     <span class="comment">// 获取半选中权限的节点的id</span></span><br><span class="line">     <span class="keyword">const</span> halfCheckedKeys = <span class="keyword">this</span>.$refs.tree.getHalfCheckedKeys()</span><br><span class="line">     <span class="keyword">const</span> newArray = [...checkedKeys, ...halfCheckedKeys]</span><br><span class="line">     <span class="comment">// console.log(newArray)</span></span><br><span class="line">     <span class="keyword">const</span> &#123;<span class="attr">data</span>: resData&#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.post(<span class="string">`roles/<span class="subst">$&#123;<span class="keyword">this</span>.currentRoleId&#125;</span>/rights`</span>, &#123;</span><br><span class="line">       rids: newArray.join(<span class="string">','</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="keyword">const</span> &#123;<span class="attr">meta</span>: &#123; status, msg &#125;&#125; = resData</span><br><span class="line">     <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="keyword">this</span>.dialogVisible = <span class="literal">false</span></span><br><span class="line">       <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">       <span class="keyword">this</span>.loadData()</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="动态渲染列表"><a href="#动态渲染列表" class="headerlink" title="动态渲染列表"></a>动态渲染列表</h3><blockquote>
<p>不同身份权限的用户登录时 展示不同的权限的列表</p>
</blockquote>
<p><code>home.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">class</span>=<span class="string">"menu"</span> <span class="attr">:unique-opened</span>=<span class="string">"true"</span> <span class="attr">:router</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-submenu</span> <span class="attr">v-for</span>=<span class="string">"item in menus"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"item.id"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:index</span>=<span class="string">"''+item.id"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-location"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.authName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-menu-item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">"item1 in item.children"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">"item1.id"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:index</span>=<span class="string">'"/" + item1.path'</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"el-icon-menu"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              &#123;&#123; item1.authName &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-submenu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>home.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态渲染侧边栏</span></span><br><span class="line">   <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">     <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'menus'</span>)</span><br><span class="line">     <span class="keyword">const</span> &#123;data, <span class="attr">meta</span>: &#123; status, msg &#125;&#125; = resData</span><br><span class="line">     <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span><br><span class="line">       <span class="keyword">this</span>.menus = data</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>.menus)</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h2><blockquote>
<p>我们目前把token验证写在了home.vue中</p>
<p>但是在某些项目中,一些功能需要登录,另一些功能不需要登录就可以展示</p>
<p>此时, 用到了路由守卫</p>
<p>在通过路由跳转之前,在”路由拦截器”中做一些事情,称之为<a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html" target="_blank" rel="noopener">路由守卫</a></p>
</blockquote>
<p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'@/views/login'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@/views/home'</span></span><br><span class="line"><span class="keyword">import</span> User <span class="keyword">from</span> <span class="string">'@/views/user/user'</span></span><br><span class="line"><span class="keyword">import</span> Rights <span class="keyword">from</span> <span class="string">'@/views/roles/rights'</span></span><br><span class="line"><span class="keyword">import</span> Roles <span class="keyword">from</span> <span class="string">'@/views/roles/roles'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    name: <span class="string">'home'</span>,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: Home,</span><br><span class="line">    children: [&#123;</span><br><span class="line">      name: <span class="string">'users'</span>,</span><br><span class="line">      path: <span class="string">'/users'</span>,</span><br><span class="line">      component: User</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      name: <span class="string">'rights'</span>,</span><br><span class="line">      path: <span class="string">'/rights'</span>,</span><br><span class="line">      component: Rights</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      name: <span class="string">'roles'</span>,</span><br><span class="line">      path: <span class="string">'/roles'</span>,</span><br><span class="line">      component: Roles</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'login'</span>,</span><br><span class="line">    path: <span class="string">'/login'</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 路由的前置守卫</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(to, <span class="keyword">from</span>)</span><br><span class="line">  <span class="keyword">if</span> (to.name === <span class="string">'login'</span>) &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = sessionStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">    <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">      router.push(&#123; <span class="string">'name'</span>: <span class="string">'login'</span> &#125;)</span><br><span class="line">      Message.warning(<span class="string">'请先登录'</span>)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h2 id="商品管理"><a href="#商品管理" class="headerlink" title="商品管理"></a>商品管理</h2><h3 id="商品分类"><a href="#商品分类" class="headerlink" title="商品分类"></a>商品分类</h3><h4 id="列表展示"><a href="#列表展示" class="headerlink" title="列表展示"></a>列表展示</h4><ol>
<li>新建categories.vue</li>
<li>配置路由</li>
<li>搭建界面</li>
</ol>
<p><code>categories.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"card-box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cus-Breadcrumb</span> <span class="attr">level1</span>=<span class="string">'商品管理'</span> <span class="attr">level2</span>=<span class="string">'商品分类'</span>&gt;</span><span class="tag">&lt;/<span class="name">cus-Breadcrumb</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"row-add"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加分类<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">height</span>=<span class="string">"450px"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"list"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"cat_name"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"分类名称"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"cat_level"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"级别"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 级别 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"scope.row.cat_level === 0"</span>&gt;</span>一级<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else-if</span>=<span class="string">"scope.row.cat_level === 1"</span>&gt;</span>二级<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else-if</span>=<span class="string">"scope.row.cat_level === 2"</span>&gt;</span>三级<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"cat_deleted"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"是否有效"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          &#123;&#123; scope.row.cat_deleted ? '无效' : '有效'&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"address"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"操作"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>categories.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'categories?type=3'</span>)</span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = resData</span><br><span class="line">      <span class="keyword">this</span>.list = data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="分页组件"><a href="#分页组件" class="headerlink" title="分页组件"></a>分页组件</h4><blockquote>
<p>接口文档中-商品分类-测试是否有分页功能</p>
<p>?type=3&amp;pagenum=1&amp;pagesize=5</p>
</blockquote>
<p><code>categories.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">     @<span class="attr">size-change</span>=<span class="string">"handleSizeChange"</span></span></span><br><span class="line"><span class="tag">     @<span class="attr">current-change</span>=<span class="string">"handleCurrentChange"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:current-page</span>=<span class="string">"pagenum"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:page-sizes</span>=<span class="string">"[5, 10, 15, 20]"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:page-size</span>=<span class="string">"pagesize"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">layout</span>=<span class="string">"total, sizes, prev, pager, next, jumper"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:total</span>=<span class="string">"total"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>categories.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      pagenum: <span class="number">1</span>,</span><br><span class="line">      pagesize: <span class="number">5</span>,</span><br><span class="line">      total: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">'categories?type=3'</span>)</span><br><span class="line">      <span class="keyword">const</span> &#123; data &#125; = resData</span><br><span class="line">      <span class="keyword">this</span>.list = data</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange (val) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange (val) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`当前页: <span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="分页功能"><a href="#分页功能" class="headerlink" title="分页功能"></a>分页功能</h4><p><code>categories.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`categories?type=3&amp;pagenum=<span class="subst">$&#123;<span class="keyword">this</span>.pagenum&#125;</span>&amp;pagesize=<span class="subst">$&#123;<span class="keyword">this</span>.pagesize&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">const</span> &#123;<span class="attr">data</span>: &#123; result, total &#125;&#125; = resData</span><br><span class="line">      <span class="keyword">this</span>.list = result</span><br><span class="line">      <span class="keyword">this</span>.total = total</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange (val) &#123;</span><br><span class="line">      <span class="keyword">this</span>.pagesize = val</span><br><span class="line">      <span class="keyword">this</span>.loadData()</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`每页 <span class="subst">$&#123;val&#125;</span> 条`</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange (val) &#123;</span><br><span class="line">      <span class="keyword">this</span>.pagenum = val</span><br><span class="line">      <span class="keyword">this</span>.loadData()</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`当前页: <span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="分类名称多级展示"><a href="#分类名称多级展示" class="headerlink" title="分类名称多级展示"></a>分类名称多级展示</h4><blockquote>
<p>这里 我们使用<a href="https://github.com/foolishchow/element-tree-grid" target="_blank" rel="noopener">element-tree-grid</a>组件</p>
</blockquote>
<ol>
<li>npm安装</li>
<li>导入</li>
<li>局部注册</li>
<li>配置element-tree-grid组件</li>
</ol>
<p><code></code>categories.vue/script/template`</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       treeKey 绑定到id 给每个节点设置一个唯一值</span></span><br><span class="line"><span class="comment">       parentKey 绑定到父id属性 区分父子节点</span></span><br><span class="line"><span class="comment">       levelKey 绑定到层级的属性</span></span><br><span class="line"><span class="comment">       childKey 绑定到储存子元素的属性</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-tree-grid</span></span></span><br><span class="line"><span class="tag">     <span class="attr">prop</span>=<span class="string">"cat_name"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">label</span>=<span class="string">"分类名称"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">treeKey</span>=<span class="string">"cat_id"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">parentKey</span>=<span class="string">"cat_pid"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">levelKey</span>=<span class="string">"cat_level"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">childKey</span>=<span class="string">"children"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">:indentSize</span>=<span class="string">"30"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-tree-grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code></code>categories.vue/script`</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ElTreeGrid = <span class="built_in">require</span>(<span class="string">'element-tree-grid'</span>)</span><br><span class="line"><span class="comment">// 省略</span></span><br><span class="line"> components: &#123;</span><br><span class="line">    ElTreeGrid</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h4 id="添加商品对话框"><a href="#添加商品对话框" class="headerlink" title="添加商品对话框"></a>添加商品对话框</h4><ol>
<li>点击添加按钮、弹出对话框<ul>
<li>对话框中使用<a href="http://element.eleme.io/#/zh-CN/component/cascader" target="_blank" rel="noopener">级联选择器</a></li>
</ul>
</li>
<li>发送获取商品分类的请求</li>
</ol>
<p><code>categories.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleShowAddDialog"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加分类<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- 添加商品的对话框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">"添加商品分类"</span> <span class="attr">:visible.sync</span>=<span class="string">"addDialogFormVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">"form"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"分类名称"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"form.cat_name"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"分类"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 这里不用自带的下拉框, 找el-ui中的级联选择器 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-cascader</span></span></span><br><span class="line"><span class="tag">            <span class="attr">clearable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">change-on-select</span></span></span><br><span class="line"><span class="tag">            <span class="attr">expand-trigger</span>=<span class="string">"hover"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">"selectedOptions"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:props</span>=<span class="string">"defaultProps"</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-cascader</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"dialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"dialogFormVisible = false"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>categories.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">addDialogFormVisible: <span class="literal">true</span>,</span><br><span class="line">      form: &#123;</span><br><span class="line">        cat_pid: <span class="number">-1</span>,</span><br><span class="line">        cat_name: <span class="string">''</span>,</span><br><span class="line">        cat_level: <span class="number">0</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 绑定层级下拉框</span></span><br><span class="line">      selectedOptions: [],</span><br><span class="line">      <span class="comment">// 层级下拉框中的数据</span></span><br><span class="line">      options: [],</span><br><span class="line">      <span class="comment">// 层级下拉框中的配置</span></span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        value: <span class="string">'cat_id'</span>,</span><br><span class="line">        label: <span class="string">'cat_name'</span>,</span><br><span class="line">        children: <span class="string">'children'</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p><code>categories.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleShowAddDialog () &#123;</span><br><span class="line">      <span class="comment">// 点击添加按钮, 显示对话框</span></span><br><span class="line">      <span class="keyword">this</span>.addDialogFormVisible = <span class="literal">true</span></span><br><span class="line">      <span class="comment">// 加载层级数据</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`categories?type=2`</span>)</span><br><span class="line">      <span class="keyword">this</span>.options = resData.data</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="添加商品功能"><a href="#添加商品功能" class="headerlink" title="添加商品功能"></a>添加商品功能</h4><p><code>categories.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"handleAdd"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>categories.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击对话框的确定按钮, 添加商品分类信息</span></span><br><span class="line">    <span class="keyword">async</span> handleAdd () &#123;</span><br><span class="line">      <span class="comment">// cat_level cat_pid</span></span><br><span class="line">      <span class="comment">// 分类的父id</span></span><br><span class="line">      <span class="comment">// 如果级联下拉框 没有选择 cat_pid=0</span></span><br><span class="line">      <span class="comment">// 如果级联下拉框 选中一级 cat_pid=selecetdOptions[0]</span></span><br><span class="line">      <span class="comment">// 如果级联下拉框 选中耳机 cat_pid=selectedOptions[1]</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.form.cat_pid = <span class="number">0</span></span><br><span class="line">        <span class="keyword">this</span>.form.cat_level = <span class="number">0</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.form.cat_pid = <span class="keyword">this</span>.selectedOptions[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">this</span>.form.cat_level = <span class="number">1</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.form.cat_pid = <span class="keyword">this</span>.selectedOptions[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">this</span>.form.cat_level = <span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 发送请求 返回201 则添加</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.post(<span class="string">`categories`</span>, <span class="keyword">this</span>.form)</span><br><span class="line">      <span class="keyword">if</span> (resData.meta.status === <span class="number">201</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.success(<span class="string">'添加成功'</span>)</span><br><span class="line">        <span class="keyword">this</span>.loadData()</span><br><span class="line">        <span class="keyword">this</span>.addDialogFormVisible = <span class="literal">false</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(resData.meta.msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="删除商品分类"><a href="#删除商品分类" class="headerlink" title="删除商品分类"></a>删除商品分类</h4><ol>
<li>找到删除按钮、绑定click事件</li>
</ol>
<p><code>categories.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span>  @<span class="attr">click</span>=<span class="string">"handleDelete(scope.row.cat_id)"</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>实现handleDelete方法,添加<a href="http://element.eleme.io/#/zh-CN/component/message-box#que-ren-xiao-xi" target="_blank" rel="noopener">删除提示框</a>, 发送删除的网络请求</li>
</ol>
<p><code>categories.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击删除按钮,弹出删除提示框,发送删除的请求</span></span><br><span class="line">    <span class="keyword">async</span> handleDelete (catId) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$confirm(<span class="string">'此操作将永久删除, 是否继续?'</span>, <span class="string">'提示'</span>, &#123;</span><br><span class="line">        confirmButtonText: <span class="string">'确定'</span>,</span><br><span class="line">        cancelButtonText: <span class="string">'取消'</span>,</span><br><span class="line">        type: <span class="string">'warning'</span></span><br><span class="line">      &#125;).then(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="comment">// 发送删除的网络请求</span></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.delete(<span class="string">`categories/<span class="subst">$&#123;catId&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">if</span> (resData.meta.status === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.$message.success(<span class="string">'删除成功'</span>)</span><br><span class="line">          <span class="keyword">this</span>.loadData()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.$message.error(resData.meta.msg)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">          type: <span class="string">'info'</span>,</span><br><span class="line">          message: <span class="string">'已取消删除'</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意</p>
<ol>
<li>.catch不写的话会报错 1 Uncaught (in promise) cancel 原因是promise结构不完整</li>
<li>删除成功后,有个小bug,当前选中的下拉箭头状态需要改变,<strong>待解决</strong></li>
</ol>
</blockquote>
<h4 id="修改商品分类"><a href="#修改商品分类" class="headerlink" title="修改商品分类"></a>修改商品分类</h4><ol>
<li>找到编辑按钮、绑定click事件</li>
</ol>
<p><code>categories.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span>  @<span class="attr">click</span>=<span class="string">"handleEdit(scope.row.cat_id)"</span> <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- 添加修改分类的对话框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">"修改商品分类"</span> <span class="attr">:visible.sync</span>=<span class="string">"editDialogFormVisible"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">"form"</span> <span class="attr">label-width</span>=<span class="string">"100px"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"分类名称"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"form.cat_name"</span> <span class="attr">auto-complete</span>=<span class="string">"off"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"editDialogFormVisible = false"</span>&gt;</span>取 消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"handleEdit"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>实现handleOpenEdit方法,给表单元素赋值,对话框弹出、</li>
</ol>
<p><code>categories.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addDialogFormVisible: <span class="literal">false</span>,</span><br></pre></td></tr></table></figure>
<p><code>categories.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击编辑按钮,弹出编辑对话框</span></span><br><span class="line">    handleOpenEdit (cat) &#123;</span><br><span class="line">      <span class="keyword">this</span>.form.cat_name = cat.cat_name</span><br><span class="line">      <span class="keyword">this</span>.form.cat_id = cat.cat_id</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.form)</span><br><span class="line">      <span class="keyword">this</span>.editDialogFormVisible = <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>点击编辑分类的对话框中的确定按钮@click=”handleEdit”,发送编辑的网络请求</li>
</ol>
<p><code>categories.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击编辑对话框的确定按钮, 发送编辑分类的网络请求</span></span><br><span class="line">    <span class="keyword">async</span> handleEdit () &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.put(<span class="string">`categories/<span class="subst">$&#123;<span class="keyword">this</span>.form.cat_id&#125;</span>`</span>, <span class="keyword">this</span>.form)</span><br><span class="line">      <span class="keyword">const</span> &#123; meta &#125; = res.data</span><br><span class="line">      <span class="keyword">if</span> (meta.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.editDialogFormVisible = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">this</span>.$message.success(meta.msg)</span><br><span class="line">        <span class="keyword">this</span>.loadData()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(meta.msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="商品列表"><a href="#商品列表" class="headerlink" title="商品列表"></a>商品列表</h3><h4 id="列表展示-1"><a href="#列表展示-1" class="headerlink" title="列表展示"></a>列表展示</h4><ol>
<li><p>新建goods/goodslist.vue</p>
</li>
<li><p>配置路由</p>
</li>
<li><p>商品列表视图+样式(和user.vue的视图很像)</p>
<p><code>goodslist.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cus-Breadcrumb</span> <span class="attr">level1</span>=<span class="string">'商品管理'</span> <span class="attr">level2</span>=<span class="string">'商品列表'</span>&gt;</span><span class="tag">&lt;/<span class="name">cus-Breadcrumb</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- 搜索框 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">class</span>=<span class="string">"searchArea"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"searchValue"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleSearch"</span> <span class="attr">slot</span>=<span class="string">"append"</span> <span class="attr">icon</span>=<span class="string">"el-icon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"addGoodDialogFormVisible = true"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加商品<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 表格 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">height</span>=<span class="string">"450px"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">border</span></span></span><br><span class="line"><span class="tag">      <span class="attr">stripe</span></span></span><br><span class="line"><span class="tag">       <span class="attr">v-loading</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">"list"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 序号 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"goods_name"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"商品名称"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"goods_price"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"商品价格(元)"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"100"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prop</span>=<span class="string">"goods_weight"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"商品重量"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">width</span>=<span class="string">"80"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"创建日期"</span> <span class="attr">width</span>=<span class="string">"120"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">            &#123;&#123;scope.row.add_time | fmtDate('YYYY-MM-DD')&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">        <span class="attr">label</span>=<span class="string">"操作"</span> <span class="attr">width</span>=<span class="string">"100"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span>  <span class="attr">plain</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodslist.vue/style</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-class">.searchArea</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.searchArea</span> <span class="selector-class">.searchInput</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">350px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>商品列表数据的请求</p>
</li>
</ol>
<p><code>goodslist.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      searchValue: <span class="string">''</span>,</span><br><span class="line">      loading: <span class="literal">false</span>,</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleSearch () &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">      <span class="keyword">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`goods?pagenum=4&amp;pagesize=10`</span>)</span><br><span class="line">      <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">this</span>.list = resData.data.goods</span><br><span class="line">      <span class="comment">// console.log(this.list)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="分页功能-1"><a href="#分页功能-1" class="headerlink" title="分页功能"></a>分页功能</h4><ol>
<li>使用<a href="http://element.eleme.io/#/zh-CN/component/pagination#pagination-fen-ye" target="_blank" rel="noopener">分页组件</a></li>
<li>配置分页组件</li>
<li>获取分页需要的参数</li>
</ol>
<p><code>goods.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">size-change</span>=<span class="string">"handleSizeChange"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">current-change</span>=<span class="string">"handleCurrentChange"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:current-page</span>=<span class="string">"pagenum"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:page-sizes</span>=<span class="string">"[10, 20, 30, 40]"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:page-size</span>=<span class="string">"pagesize"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">layout</span>=<span class="string">"total, sizes, prev, pager, next, jumper"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:total</span>=<span class="string">"total"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goods.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pagenum: <span class="number">1</span>,</span><br><span class="line">pagesize: <span class="number">10</span>,</span><br><span class="line">total: <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p><code>goods.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">handleSizeChange (val) &#123;</span><br><span class="line">     <span class="comment">// console.log(`每页 $&#123;val&#125; 条`)</span></span><br><span class="line">     <span class="keyword">this</span>.pagesize = val</span><br><span class="line">     <span class="keyword">this</span>.pagenum = <span class="number">1</span></span><br><span class="line">     <span class="keyword">this</span>.loadData()</span><br><span class="line">   &#125;,</span><br><span class="line">   handleCurrentChange (val) &#123;</span><br><span class="line">     <span class="comment">// console.log(`当前页: $&#123;val&#125;`)</span></span><br><span class="line">     <span class="keyword">this</span>.pagenum = val</span><br><span class="line">     <span class="keyword">this</span>.loadData()</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="keyword">async</span> loadData () &#123;</span><br><span class="line">     <span class="keyword">this</span>.loading = <span class="literal">true</span></span><br><span class="line">     <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`goods?pagenum=<span class="subst">$&#123;<span class="keyword">this</span>.pagenum&#125;</span>&amp;pagesize=<span class="subst">$&#123;<span class="keyword">this</span>.pagesize&#125;</span>`</span>)</span><br><span class="line">     <span class="keyword">this</span>.total = resData.data.total</span><br><span class="line">     <span class="keyword">this</span>.list = resData.data.goods</span><br><span class="line">     <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">     <span class="comment">// console.log(this.list)</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="添加商品-准备组件"><a href="#添加商品-准备组件" class="headerlink" title="添加商品-准备组件"></a>添加商品-准备组件</h4><ol>
<li>新建添加商品的组件goodsadd.vue 、配置路由</li>
<li>找到添加的按钮,绑定click事件</li>
</ol>
<p><code>goodslist.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"$router.push(&#123;name:'goodsadd'&#125;)"</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">plain</span>&gt;</span>添加商品<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="添加商品-组件布局"><a href="#添加商品-组件布局" class="headerlink" title="添加商品-组件布局"></a>添加商品-组件布局</h4><ol>
<li>面包屑</li>
<li><a href="http://element.eleme.io/#/zh-CN/component/alert" target="_blank" rel="noopener">alert提示框</a></li>
<li><a href="http://element.eleme.io/#/zh-CN/component/steps#steps-bu-zou-tiao" target="_blank" rel="noopener">步骤条</a></li>
<li><a href="http://element.eleme.io/#/zh-CN/component/tabs" target="_blank" rel="noopener">tabs标签页</a></li>
</ol>
<p><code>goodsadd.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 面包屑 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cus-Breadcrumb</span> <span class="attr">level1</span>=<span class="string">'商品管理'</span> <span class="attr">level2</span>=<span class="string">'商品列表'</span>&gt;</span><span class="tag">&lt;/<span class="name">cus-Breadcrumb</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 提示框 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-alert</span> <span class="attr">class</span>=<span class="string">"alert"</span> <span class="attr">title</span>=<span class="string">"添加商品信息"</span> <span class="attr">type</span>=<span class="string">"info"</span> <span class="attr">center</span> <span class="attr">:closable</span>=<span class="string">"false"</span> <span class="attr">show-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">el-alert</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 步骤条 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-steps</span> <span class="attr">class</span>=<span class="string">"steps"</span> <span class="attr">:space</span>=<span class="string">"400"</span> <span class="attr">align-center</span> <span class="attr">:active</span>=<span class="string">"active*1"</span> <span class="attr">finish-status</span>=<span class="string">"success"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">"基本信息"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-step</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">"商品参数"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-step</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">"商品属性"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-step</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">"商品图片"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-step</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-step</span> <span class="attr">title</span>=<span class="string">"商品内容"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-step</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-steps</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- tabs选项卡 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- element-ui已经封装好了，当切换时,v-model的值自动切换为el-tabs-pane的name对应的值. --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-tabs</span> <span class="attr">class</span>=<span class="string">"tabs"</span> <span class="attr">v-model</span>=<span class="string">"active"</span> <span class="attr">tab-position</span>=<span class="string">"left"</span> <span class="attr">style</span>=<span class="string">"height: 200px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"1"</span> <span class="attr">label</span>=<span class="string">"基本信息"</span>&gt;</span>基本信息<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"2"</span> <span class="attr">label</span>=<span class="string">"商品参数"</span>&gt;</span>商品参数<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"3"</span> <span class="attr">label</span>=<span class="string">"商品属性"</span>&gt;</span>商品属性<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"4"</span> <span class="attr">label</span>=<span class="string">"商品图片"</span>&gt;</span>商品图片<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"5"</span> <span class="attr">label</span>=<span class="string">"商品内容"</span>&gt;</span>商品内容<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-tabs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      active: <span class="string">"1"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="添加商品-商品分类"><a href="#添加商品-商品分类" class="headerlink" title="添加商品-商品分类"></a>添加商品-商品分类</h4><ol>
<li>设置表单</li>
<li>添加下拉级联选择器</li>
<li>配置级联选择器</li>
</ol>
<p><code>goodsadd.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- tabs选项卡 --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- element-ui已经封装好了，当切换时,v-model的值自动切换为el-tabs-pane的name对应的值. --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">class</span>=<span class="string">"form"</span> <span class="attr">label-position</span>=<span class="string">"top"</span> <span class="attr">:model</span>=<span class="string">"form"</span> <span class="attr">label-width</span>=<span class="string">"80px"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-tabs</span> <span class="attr">class</span>=<span class="string">"tabs"</span> <span class="attr">v-model</span>=<span class="string">"active"</span> <span class="attr">tab-position</span>=<span class="string">"left"</span> <span class="attr">style</span>=<span class="string">"height: 200px;"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"1"</span> <span class="attr">label</span>=<span class="string">"基本信息"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品名称"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品价格"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品重量"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品数量"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-input</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品分类"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 级联选择器 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-cascader</span></span></span><br><span class="line"><span class="tag">           <span class="attr">clearable</span></span></span><br><span class="line"><span class="tag">           <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">:props</span>=<span class="string">"defaultProps"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">v-model</span>=<span class="string">"selectedOptions "</span></span></span><br><span class="line"><span class="tag">           <span class="attr">expand-trigger</span>=<span class="string">"hover"</span></span></span><br><span class="line"><span class="tag">           @<span class="attr">change</span>=<span class="string">"handleChange"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-cascader</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"2"</span> <span class="attr">label</span>=<span class="string">"商品参数"</span>&gt;</span>商品参数<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"3"</span> <span class="attr">label</span>=<span class="string">"商品属性"</span>&gt;</span>商品属性<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"4"</span> <span class="attr">label</span>=<span class="string">"商品图片"</span>&gt;</span>商品图片<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"5"</span> <span class="attr">label</span>=<span class="string">"商品内容"</span>&gt;</span>商品内容<span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-tabs</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue/script</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      active: <span class="string">'1'</span>,</span><br><span class="line">      form: &#123;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 层级下拉框的数据源</span></span><br><span class="line">      options: [],</span><br><span class="line">      <span class="comment">// 层级下拉框的数据源配置</span></span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        value: <span class="string">'cat_id'</span>,</span><br><span class="line">        label: <span class="string">'cat_name'</span>,</span><br><span class="line">        children: <span class="string">'children'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 绑定到层级下拉框上的数据</span></span><br><span class="line">      selectedOptions: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadOptions()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange () &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length !== <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.warning(<span class="string">'商品只能添加到三级分类'</span>)</span><br><span class="line">        <span class="keyword">this</span>.selectedOptions.length = <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> loadOptions () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`categories?type=3`</span>)</span><br><span class="line">      <span class="keyword">this</span>.options = resData.data</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.options)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue/style</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-class">.alert</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.form</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="添加商品-基本信息"><a href="#添加商品-基本信息" class="headerlink" title="添加商品-基本信息"></a>添加商品-基本信息</h4><p><code>goodsadd.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品名称"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"form.goods_name"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品价格"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"form.goods_price"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品重量"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"form.goods_weight"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">"商品数量"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"form.goods_number"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue/script/data</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">form: &#123;</span><br><span class="line">        goods_name: <span class="string">''</span>,</span><br><span class="line">        goods_price: <span class="string">''</span>,</span><br><span class="line">        goods_number: <span class="string">''</span>,</span><br><span class="line">        goods_weight: <span class="string">''</span>,</span><br><span class="line">        <span class="comment">// 分类id</span></span><br><span class="line">        goods_cat: <span class="string">''</span></span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="添加商品-商品动态参数"><a href="#添加商品-商品动态参数" class="headerlink" title="添加商品-商品动态参数"></a>添加商品-商品动态参数</h4><blockquote>
<p>使用<a href="http://element.eleme.io/#/zh-CN/component/checkbox" target="_blank" rel="noopener">多选框</a></p>
</blockquote>
<p><code>goodsadd.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"2"</span> <span class="attr">label</span>=<span class="string">"商品参数"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">v-for</span>=<span class="string">"item in dynamicsParams"</span> <span class="attr">:key</span>=<span class="string">"item.attr_id"</span> <span class="attr">:label</span>=<span class="string">"item.attr_name"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-checkbox-group</span> <span class="attr">v-model</span>=<span class="string">"item.attr_vals"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-checkbox</span> <span class="attr">border</span> <span class="attr">v-for</span>=<span class="string">"val in item.attr_vals"</span> <span class="attr">:key</span>=<span class="string">"val"</span> <span class="attr">:label</span>=<span class="string">"val"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-checkbox</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-checkbox-group</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleTabClick () &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.active === <span class="string">'2'</span> || <span class="keyword">this</span>.active === <span class="string">'3'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length !== <span class="number">3</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.$message.error(<span class="string">'请选择商品的三级分类'</span>)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.active === <span class="string">'1'</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: resData &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`categories/<span class="subst">$&#123;<span class="keyword">this</span>.selectedOptions[<span class="number">2</span>]&#125;</span>/attributes?sel=many`</span>)</span><br><span class="line">        <span class="keyword">this</span>.dynamicsParams = resData.data</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.dynamicsParams)</span><br><span class="line">        <span class="keyword">this</span>.dynamicsParams.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">          item.attr_vals = item.attr_vals.trim().length === <span class="number">0</span> ? [] : item.attr_vals.trim().split(<span class="string">','</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="添加商品-商品属性"><a href="#添加商品-商品属性" class="headerlink" title="添加商品-商品属性"></a>添加商品-商品属性</h4><ol>
<li>获取静态参数</li>
<li>商品属性展示</li>
</ol>
<h4 id="添加商品-商品图片"><a href="#添加商品-商品图片" class="headerlink" title="添加商品-商品图片"></a>添加商品-商品图片</h4><blockquote>
<p>使用<a href="http://element-cn.eleme.io/#/zh-CN/component/upload#upload-shang-chuan" target="_blank" rel="noopener">上传组件</a></p>
</blockquote>
<p><code>goodsadd.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">"4"</span> <span class="attr">label</span>=<span class="string">"商品图片"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- action</span></span><br><span class="line"><span class="comment">         必须设置全路径</span></span><br><span class="line"><span class="comment">         必须设置token --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">         <span class="attr">action</span>=<span class="string">"http://127.0.0.1:8888/api/private/v1/upload"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:on-remove</span>=<span class="string">"handleRemove"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:on-success</span>=<span class="string">"handleSuccess"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:file-list</span>=<span class="string">"fileList"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:headers</span>=<span class="string">"tokenHeader"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">list-type</span>=<span class="string">"picture"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">"small"</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>点击上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">handleRemove (file, fileList) &#123;</span><br><span class="line">      <span class="keyword">const</span> index = <span class="keyword">this</span>.form.pics.findIndex(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item.pic === file.response.data.tem_path</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">this</span>.form.pics.splice(index, <span class="number">1</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.form)</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSuccess (response, file, fileList) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; meta, data &#125; = response</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (meta.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.success(<span class="string">'图片上传成功'</span>)</span><br><span class="line">        <span class="keyword">this</span>.form.pics.push(&#123;</span><br><span class="line">          pic: response.data.tmp_path</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(meta.msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="添加商品-商品内容"><a href="#添加商品-商品内容" class="headerlink" title="添加商品-商品内容"></a>添加商品-商品内容</h4><blockquote>
<p>使用<a href="https://github.com/surmon-china/vue-quill-editor" target="_blank" rel="noopener">富文本编辑器</a></p>
</blockquote>
<h5 id="添加商品"><a href="#添加商品" class="headerlink" title="添加商品"></a>添加商品</h5><p><code>goodsadd.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleAdd () &#123;</span><br><span class="line">      <span class="keyword">this</span>.form.goods_cat = <span class="keyword">this</span>.selectedOptions.join(<span class="string">','</span>)</span><br><span class="line">      <span class="keyword">const</span> dy = <span class="keyword">this</span>.dynamicsParams</span><br><span class="line">      <span class="keyword">const</span> st = <span class="keyword">this</span>.staticParams</span><br><span class="line">      <span class="keyword">const</span> arr1 = dy.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        item.attr_vals = item.attr_vals.join(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">attr_id</span>: item.attr_id, <span class="attr">attr_value</span>: item.attr_vals&#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">const</span> arr2 = st.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        item.attr_vals = item.attr_vals.join(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">attr_id</span>: item.attr_id, <span class="attr">attr_value</span>: item.attr_vals&#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">this</span>.form.attrs = [...arr1, ...arr2]</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.form.attrs)</span><br><span class="line">      <span class="keyword">const</span> &#123;<span class="attr">data</span>: &#123;<span class="attr">meta</span>: &#123;status, msg&#125;&#125;&#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.post(<span class="string">'goods'</span>, <span class="keyword">this</span>.form)</span><br><span class="line">      <span class="keyword">if</span> (status === <span class="number">201</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.success(msg)</span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">          name: <span class="string">'goodslist'</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(msg)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="分类参数"><a href="#分类参数" class="headerlink" title="分类参数"></a>分类参数</h3><h4 id="分类参数页面展示"><a href="#分类参数页面展示" class="headerlink" title="分类参数页面展示"></a>分类参数页面展示</h4><ol>
<li>新建params.vue</li>
<li>配置路由</li>
<li>页面布局</li>
</ol>
<p><code>params.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">"box-card"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cus-Breadcrumb</span> <span class="attr">level1</span>=<span class="string">'商品管理'</span> <span class="attr">level2</span>=<span class="string">'分类参数'</span>&gt;</span><span class="tag">&lt;/<span class="name">cus-Breadcrumb</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-alert</span> <span class="attr">class</span>=<span class="string">"alert"</span> <span class="attr">title</span>=<span class="string">"注意:只允许为第三级分类设置参数"</span> <span class="attr">type</span>=<span class="string">"warning"</span>  <span class="attr">:closable</span>=<span class="string">"false"</span> <span class="attr">show-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">el-alert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">"24"</span> <span class="attr">class</span>=<span class="string">"col"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>请选择商品分类<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-cascader</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">"selectedOptions"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:show-all-levels</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:props</span>=<span class="string">"&#123; label:'cat_name', value:'cat_id'&#125;"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">expand-trigger</span>=<span class="string">"hover"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">change</span>=<span class="string">"handleChange"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-cascader</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-tabs</span> <span class="attr">v-model</span>=<span class="string">"activeName"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">label</span>=<span class="string">"动态参数"</span> <span class="attr">name</span>=<span class="string">"many"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">"isDisabled"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>设置动态参数<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:data</span>=<span class="string">"dynamicParams"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"expand"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"40"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tag</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">closable</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:disable-transitions</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  @<span class="attr">close</span>=<span class="string">"handleClose"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">"input-new-tag"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-if</span>=<span class="string">"inputVisible"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-model</span>=<span class="string">"inputValue"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">ref</span>=<span class="string">"saveTagInput"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">                  @<span class="attr">keyup.enter.native</span>=<span class="string">"handleInputConfirm"</span></span></span><br><span class="line"><span class="tag">                  @<span class="attr">blur</span>=<span class="string">"handleInputConfirm"</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"button-new-tag"</span> <span class="attr">size</span>=<span class="string">"small"</span> @<span class="attr">click</span>=<span class="string">"showInput"</span>&gt;</span>+ New Tag<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">prop</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"#"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"40"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">prop</span>=<span class="string">"attr_name"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"属性名称"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"操作"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primany"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">plain</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">plain</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">label</span>=<span class="string">"静态参数"</span> <span class="attr">name</span>=<span class="string">"only"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:disabled</span>=<span class="string">"isDisabled"</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>设置静态参数<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:data</span>=<span class="string">"staticParams"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"width: 100%"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"expand"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"40"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">prop</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"#"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"40"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">prop</span>=<span class="string">"attr_name"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"属性名称"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">prop</span>=<span class="string">"attr_vals"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"属性值"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">width</span>=<span class="string">"180"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label</span>=<span class="string">"操作"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">"scope"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"primany"</span> <span class="attr">icon</span>=<span class="string">"el-icon-edit"</span> <span class="attr">plain</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">icon</span>=<span class="string">"el-icon-delete"</span> <span class="attr">plain</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-tabs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      options: [],</span></span><br><span class="line"><span class="undefined">      selectedOptions: [],</span></span><br><span class="line"><span class="javascript">      activeName: <span class="string">'many'</span>,</span></span><br><span class="line"><span class="undefined">      dynamicParams: [],</span></span><br><span class="line"><span class="undefined">      staticParams: [],</span></span><br><span class="line"><span class="javascript">      isDisabled: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">      inputVisible: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      inputValue: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  created () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.loadOptions()</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    handleClose () &#123;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    showInput () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.inputVisible = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$refs.saveTagInput.$refs.input.focus()</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    handleInputConfirm () &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    handleChange () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length === <span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.isDisabled = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.loadTableData()</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.isDisabled = <span class="literal">true</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> loadOptions () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123;data, <span class="attr">meta</span>: &#123; status, msg &#125;&#125; &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`categories?type=3`</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.options = data</span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(this.options)</span></span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$message.error(msg)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> loadTableData () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="keyword">this</span>.selectedOptions.length !== <span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$message.warning(<span class="string">'请选择三级分类'</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123;data, <span class="attr">meta</span>: &#123; status, msg &#125;&#125; &#125; =</span></span><br><span class="line"><span class="javascript">      <span class="keyword">await</span> <span class="keyword">this</span>.$http.get(<span class="string">`categories/<span class="subst">$&#123;<span class="keyword">this</span>.selectedOptions[<span class="number">2</span>]&#125;</span>/attributes?sel=<span class="subst">$&#123;<span class="keyword">this</span>.activeName&#125;</span>`</span>)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (status === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.dynamicParams = data</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 动态参数attr_vals -&gt; 数组</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 在动态参数数组上添加一个属性params 保存</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.dynamicParams.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(item.attr_vals)</span></span><br><span class="line"><span class="javascript">          item.params = item.attr_vals.trim().split(<span class="string">','</span>).length ? [] : item.attr_vals.trim().split(<span class="string">','</span>)</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$message.error(msg)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.alert</span>&#123;</span></span><br><span class="line"><span class="undefined">  margin-top: 16px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.col</span>&#123;</span></span><br><span class="line"><span class="undefined">  margin-top: 16px;</span></span><br><span class="line"><span class="undefined">  margin-bottom: 20px;</span></span><br><span class="line"><span class="undefined">  font-size: 14px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h4><ol>
<li>使用动态参数数组 this.$set()方法</li>
<li>动态渲染el-tag</li>
<li>从视图中删除对应的el-tag</li>
<li>发送请求、更新视图</li>
</ol>
<p><code>params.vue/template</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tag</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-for</span>=<span class="string">"(item, index) in scope.row.params"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">closable</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:disable-transitions</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  @<span class="attr">close</span>=<span class="string">"handleClose(scope.row, index)"</span>&gt;</span></span><br><span class="line">                  &#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>params.vue/script/methods</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> handleClose (row, index) &#123;</span><br><span class="line">      row.params.splice(index, <span class="number">1</span>)</span><br><span class="line">      <span class="comment">// 准备请求的数据</span></span><br><span class="line">      <span class="comment">// 准备url上需要的id</span></span><br><span class="line">      <span class="keyword">const</span> catId = row.cat_id</span><br><span class="line">      <span class="keyword">const</span> attrId = row.attr_id</span><br><span class="line">      <span class="comment">// console.log(catId, attrId)</span></span><br><span class="line">      <span class="comment">// put携带的对象</span></span><br><span class="line">      <span class="keyword">const</span> putData = &#123;</span><br><span class="line">        attr_name: row.attr_name,</span><br><span class="line">        attr_sel: row.attr_sel,</span><br><span class="line">        attr_vals: row.params.join(<span class="string">','</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 让数据一致</span></span><br><span class="line">      row.attr_vals = putData.attr_vals</span><br><span class="line">      <span class="comment">// 发送请求</span></span><br><span class="line">      <span class="keyword">const</span> url = <span class="string">`/categories/<span class="subst">$&#123;catId&#125;</span>/attributes/<span class="subst">$&#123;attrId&#125;</span>`</span></span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.$http.put(url, putData)</span><br><span class="line">      <span class="comment">// console.log(res)</span></span><br><span class="line">      <span class="keyword">if</span> (res.data.meta.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.success(<span class="string">'更新成功'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.$message.error(<span class="string">'更新失败'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 修改loadTableData方法中的部分代码</span></span><br><span class="line"><span class="comment">//const arr = item.attr_vals.trim().split(',').length === 0 ? [] : item.attr_vals.trim().split(',')</span></span><br><span class="line">          <span class="comment">// 动态给对象添加的成员, 数据绑定有问题, 所以用arr去处理</span></span><br><span class="line">          <span class="keyword">this</span>.$set(item, <span class="string">'params'</span>, arr)</span><br></pre></td></tr></table></figure>
<h4 id="添加标签"><a href="#添加标签" class="headerlink" title="添加标签"></a>添加标签</h4><blockquote>
<p>实现handleInputConfirm(row) 方法</p>
<p>过程和删除标签功能很像</p>
<p> tab切换时调用this.loadTableData()方法</p>
</blockquote>
<h4 id="响应拦截器"><a href="#响应拦截器" class="headerlink" title="响应拦截器"></a>响应拦截器</h4><p><code>http.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">instance.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; <span class="attr">meta</span>: &#123; status, msg &#125; &#125; &#125; = response</span><br><span class="line">    <span class="keyword">if</span> (status !== <span class="string">'200'</span> || status !== <span class="string">'201'</span>) &#123;</span><br><span class="line">      Message.error(msg)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改之后 可以将组件中的所有 status等于200和201之外的判断去掉</p>
</blockquote>
<h2 id="订单管理"><a href="#订单管理" class="headerlink" title="订单管理"></a>订单管理</h2><h3 id="订单列表展示"><a href="#订单列表展示" class="headerlink" title="订单列表展示"></a>订单列表展示</h3><ol>
<li>新建orders.vue</li>
<li>配置路由</li>
<li>列表展示</li>
<li>省市选择</li>
</ol>
<h2 id="数据统计"><a href="#数据统计" class="headerlink" title="数据统计"></a>数据统计</h2><ol>
<li>新建reports.vue</li>
<li>配置路由</li>
<li>安装echarts</li>
<li>获取数据</li>
<li>展示统计图</li>
</ol>
<h2 id="项目打包"><a href="#项目打包" class="headerlink" title="项目打包"></a>项目打包</h2><blockquote>
<p>结果: 可以在任何web服务器中运行该项目,不依赖webpack、npm、vue-cli等工具</p>
<p> 调整含义 ? </p>
</blockquote>
<p><code>操作</code></p>
<ul>
<li><p>npm run build</p>
<ul>
<li>把src下的所有文件进行合并压缩</li>
<li>打包后的代码自动出现在dist文件夹中</li>
<li>把dist放在web服务器中去访问, 给后台运维去部署上线</li>
</ul>
</li>
<li><p>优化</p>
<ol>
<li><a href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E6%8A%8A%E7%BB%84%E4%BB%B6%E6%8C%89%E7%BB%84%E5%88%86%E5%9D%97" target="_blank" rel="noopener">路由懒加载</a></li>
</ol>
<p><code>要解决的问题</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">webpack会</span><br><span class="line">把我们自己的js文件都合并打包编译到app.xxxx.js中</span><br><span class="line">把第三方包(element-ui、echarts..)合并编译到vender.xxx.js中</span><br><span class="line">项目运行时</span><br><span class="line">会直接把app.xxxx.js和vender.xxx.js都进行下载 很慢</span><br></pre></td></tr></table></figure>
<p><code>解决方案</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">加载的时候 只需要加载一次就可以了 之后就不需要加载了</span><br><span class="line">优点:第一次加载 慢, 之后 快</span><br><span class="line">缺点:如果文件太大,第一次加载会很慢</span><br><span class="line"></span><br><span class="line">把组件的js文件打包到不同的js文件中</span><br><span class="line">用户点到哪里,就加载哪里对应的资源文件,按需去加载</span><br><span class="line">用路由懒加载去实现</span><br></pre></td></tr></table></figure>
<p><code>代码</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将之前的路由中的代入组件 进行改写</span></span><br><span class="line"><span class="keyword">const</span> XXX = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/XXX.vue'</span>)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><a href="https://www.bootcdn.cn/" target="_blank" rel="noopener">CDN</a>加载第三方包<ol>
<li>在index.html中引入资源</li>
<li>配置webpack</li>
</ol>
</li>
</ol>
</li>
</ul>

      
    </div>
    
  </div>
  
    


    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2018/05/05/web移动开发/">
                    web移动端
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/06/08/同源策略/">
                    浏览器同源政策及其规避方法
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue-电商后台管理系统开发文档"><span class="toc-number">1.</span> <span class="toc-text">Vue 电商后台管理系统开发文档</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#项目准备"><span class="toc-number">1.1.</span> <span class="toc-text">项目准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#将-API-Server-部署到本地"><span class="toc-number">1.1.1.</span> <span class="toc-text">将 API Server 部署到本地</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API-接口文档"><span class="toc-number">1.1.2.</span> <span class="toc-text">API 接口文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Postman-接口测试"><span class="toc-number">1.1.3.</span> <span class="toc-text">Postman 接口测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目起步"><span class="toc-number">1.2.</span> <span class="toc-text">项目起步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-cli初始化项目"><span class="toc-number">1.2.1.</span> <span class="toc-text">vue-cli初始化项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#项目文件结构"><span class="toc-number">1.2.2.</span> <span class="toc-text">项目文件结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动打开浏览器"><span class="toc-number">1.2.3.</span> <span class="toc-text">自动打开浏览器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码风格"><span class="toc-number">1.2.4.</span> <span class="toc-text">代码风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-版本控制"><span class="toc-number">1.2.5.</span> <span class="toc-text">Git 版本控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简化代码"><span class="toc-number">1.2.6.</span> <span class="toc-text">简化代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#导入-ElementUI"><span class="toc-number">1.2.7.</span> <span class="toc-text">导入 ElementUI</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#登录"><span class="toc-number">1.3.</span> <span class="toc-text">登录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置路由"><span class="toc-number">1.3.1.</span> <span class="toc-text">配置路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布局登录页面"><span class="toc-number">1.3.2.</span> <span class="toc-text">布局登录页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调整样式"><span class="toc-number">1.3.3.</span> <span class="toc-text">调整样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#导入axios"><span class="toc-number">1.3.4.</span> <span class="toc-text">导入axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#登录功能"><span class="toc-number">1.3.5.</span> <span class="toc-text">登录功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用async和await"><span class="toc-number">1.3.6.</span> <span class="toc-text">使用async和await</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Home"><span class="toc-number">1.4.</span> <span class="toc-text">Home</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#新建home组件"><span class="toc-number">1.4.1.</span> <span class="toc-text">新建home组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#样式调整"><span class="toc-number">1.4.2.</span> <span class="toc-text">样式调整</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#头部组件"><span class="toc-number">1.4.3.</span> <span class="toc-text">头部组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#页面结构"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">页面结构:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#样式调整-1"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">样式调整</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#左侧导航菜单"><span class="toc-number">1.4.4.</span> <span class="toc-text">左侧导航菜单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#登录成功后跳转到home页"><span class="toc-number">1.4.5.</span> <span class="toc-text">登录成功后跳转到home页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断用户是否登录"><span class="toc-number">1.4.6.</span> <span class="toc-text">判断用户是否登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户退出"><span class="toc-number">1.4.7.</span> <span class="toc-text">用户退出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#合并分支"><span class="toc-number">1.4.8.</span> <span class="toc-text">合并分支</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户列表"><span class="toc-number">1.5.</span> <span class="toc-text">用户列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表路由配置"><span class="toc-number">1.5.1.</span> <span class="toc-text">用户列表路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表页面元素"><span class="toc-number">1.5.2.</span> <span class="toc-text">用户列表页面元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表数据渲染"><span class="toc-number">1.5.3.</span> <span class="toc-text">用户列表数据渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#验证token"><span class="toc-number">1.5.4.</span> <span class="toc-text">验证token</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表-用户操作"><span class="toc-number">1.5.5.</span> <span class="toc-text">用户列表-用户操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表-用户状态"><span class="toc-number">1.5.6.</span> <span class="toc-text">用户列表-用户状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表-处理日期"><span class="toc-number">1.5.7.</span> <span class="toc-text">用户列表-处理日期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加载动画"><span class="toc-number">1.5.8.</span> <span class="toc-text">加载动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页处理"><span class="toc-number">1.5.9.</span> <span class="toc-text">分页处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户列表-搜索功能"><span class="toc-number">1.5.10.</span> <span class="toc-text">用户列表-搜索功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户状态"><span class="toc-number">1.5.11.</span> <span class="toc-text">用户状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除功能"><span class="toc-number">1.5.12.</span> <span class="toc-text">删除功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加用户"><span class="toc-number">1.5.13.</span> <span class="toc-text">添加用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#显示用户信息输入框"><span class="toc-number">1.5.13.1.</span> <span class="toc-text">显示用户信息输入框</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#处理添加用户的表单提交"><span class="toc-number">1.5.13.2.</span> <span class="toc-text">处理添加用户的表单提交</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#表单验证"><span class="toc-number">1.5.14.</span> <span class="toc-text">表单验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑用户"><span class="toc-number">1.5.15.</span> <span class="toc-text">编辑用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#显示编辑的页面"><span class="toc-number">1.5.15.1.</span> <span class="toc-text">显示编辑的页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#处理编辑的表单提交"><span class="toc-number">1.5.15.2.</span> <span class="toc-text">处理编辑的表单提交</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分配角色"><span class="toc-number">1.5.16.</span> <span class="toc-text">分配角色</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#显示分配角色的对话框"><span class="toc-number">1.5.16.1.</span> <span class="toc-text">显示分配角色的对话框</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#显示角色"><span class="toc-number">1.5.16.2.</span> <span class="toc-text">显示角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#显示当前用户的角色"><span class="toc-number">1.5.16.3.</span> <span class="toc-text">显示当前用户的角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分配角色功能"><span class="toc-number">1.5.16.4.</span> <span class="toc-text">分配角色功能</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#权限管理"><span class="toc-number">1.6.</span> <span class="toc-text">权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#权限列表展示"><span class="toc-number">1.6.1.</span> <span class="toc-text">权限列表展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置axios拦截器"><span class="toc-number">1.6.2.</span> <span class="toc-text">设置axios拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#角色列表展示"><span class="toc-number">1.6.3.</span> <span class="toc-text">角色列表展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义面包屑组件"><span class="toc-number">1.6.4.</span> <span class="toc-text">自定义面包屑组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#角色列表-操作-加载动画"><span class="toc-number">1.6.5.</span> <span class="toc-text">角色列表-操作+加载动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#表格展开列-三级权限"><span class="toc-number">1.6.6.</span> <span class="toc-text">表格展开列+三级权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#无权限的处理"><span class="toc-number">1.6.7.</span> <span class="toc-text">无权限的处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除用户的权限"><span class="toc-number">1.6.8.</span> <span class="toc-text">删除用户的权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除用户权限-优化"><span class="toc-number">1.6.9.</span> <span class="toc-text">删除用户权限-优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分配权限-显示树形结构"><span class="toc-number">1.6.10.</span> <span class="toc-text">分配权限-显示树形结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分类权限-获取选中项节点"><span class="toc-number">1.6.11.</span> <span class="toc-text">分类权限-获取选中项节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分配权限-更新权限"><span class="toc-number">1.6.12.</span> <span class="toc-text">分配权限-更新权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态渲染列表"><span class="toc-number">1.6.13.</span> <span class="toc-text">动态渲染列表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路由守卫"><span class="toc-number">1.7.</span> <span class="toc-text">路由守卫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#商品管理"><span class="toc-number">1.8.</span> <span class="toc-text">商品管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#商品分类"><span class="toc-number">1.8.1.</span> <span class="toc-text">商品分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#列表展示"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">列表展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分页组件"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">分页组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分页功能"><span class="toc-number">1.8.1.3.</span> <span class="toc-text">分页功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分类名称多级展示"><span class="toc-number">1.8.1.4.</span> <span class="toc-text">分类名称多级展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品对话框"><span class="toc-number">1.8.1.5.</span> <span class="toc-text">添加商品对话框</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品功能"><span class="toc-number">1.8.1.6.</span> <span class="toc-text">添加商品功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除商品分类"><span class="toc-number">1.8.1.7.</span> <span class="toc-text">删除商品分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改商品分类"><span class="toc-number">1.8.1.8.</span> <span class="toc-text">修改商品分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#商品列表"><span class="toc-number">1.8.2.</span> <span class="toc-text">商品列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#列表展示-1"><span class="toc-number">1.8.2.1.</span> <span class="toc-text">列表展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分页功能-1"><span class="toc-number">1.8.2.2.</span> <span class="toc-text">分页功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-准备组件"><span class="toc-number">1.8.2.3.</span> <span class="toc-text">添加商品-准备组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-组件布局"><span class="toc-number">1.8.2.4.</span> <span class="toc-text">添加商品-组件布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-商品分类"><span class="toc-number">1.8.2.5.</span> <span class="toc-text">添加商品-商品分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-基本信息"><span class="toc-number">1.8.2.6.</span> <span class="toc-text">添加商品-基本信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-商品动态参数"><span class="toc-number">1.8.2.7.</span> <span class="toc-text">添加商品-商品动态参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-商品属性"><span class="toc-number">1.8.2.8.</span> <span class="toc-text">添加商品-商品属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-商品图片"><span class="toc-number">1.8.2.9.</span> <span class="toc-text">添加商品-商品图片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加商品-商品内容"><span class="toc-number">1.8.2.10.</span> <span class="toc-text">添加商品-商品内容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#添加商品"><span class="toc-number">1.8.2.10.1.</span> <span class="toc-text">添加商品</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分类参数"><span class="toc-number">1.8.3.</span> <span class="toc-text">分类参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#分类参数页面展示"><span class="toc-number">1.8.3.1.</span> <span class="toc-text">分类参数页面展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除标签"><span class="toc-number">1.8.3.2.</span> <span class="toc-text">删除标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加标签"><span class="toc-number">1.8.3.3.</span> <span class="toc-text">添加标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#响应拦截器"><span class="toc-number">1.8.3.4.</span> <span class="toc-text">响应拦截器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#订单管理"><span class="toc-number">1.9.</span> <span class="toc-text">订单管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#订单列表展示"><span class="toc-number">1.9.1.</span> <span class="toc-text">订单列表展示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据统计"><span class="toc-number">1.10.</span> <span class="toc-text">数据统计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目打包"><span class="toc-number">1.11.</span> <span class="toc-text">项目打包</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"vue项目笔记　| t-t　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2018/05/05/web移动开发/" title="上一篇: web移动端">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/06/08/同源策略/" title="下一篇: 浏览器同源政策及其规避方法">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/21/less/">简单了解Less</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/05/web移动开发/">web移动端</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/08/Vue项目笔记/">vue项目笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/08/同源策略/">浏览器同源政策及其规避方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/22/H5C3/13-视差滚动/">13-视差滚动</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/21/H5C3/12-拖拽上传/">12-拖拽上传</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/20/H5C3/11-离线缓存/">11-离线缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/19/H5C3/10-本地存储/">10-本地存储</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/19/H5C3/09-历史浏览记录/">09-历史浏览记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/19/H5C3/08-自定义播放器/">08-自定义播放器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/18/H5C3/07-全屏操作/">07-全屏操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/18/H5C3/06-dom扩展/">06-dom扩展</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/17/H5C3/05-fullpage/">05-fullpage</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/16/H5C3/04-边框图片/">04-边框图片</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/16/H5C3/03-3d转换/">03-3D转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/15/H5C3/02-选择器和动画/">02-选择器和动画</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/15/H5C3/01-关于H5开发/">01-关于H5开发</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/04/ajax/13-Ajax跨域/">13-Ajax跨域</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/04/ajax/12-虚拟主机配置/">12-虚拟主机配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/04/ajax/11-模板引擎/">11-ArtTemplate模板引擎</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/ajax/10-封装方法/">10-封装方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/ajax/09-jQuery提供的Ajax方法/">09-jQuery提供的Ajax方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/ajax/08-JSON/">08-JSON</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/ajax/07-文件上传与进度条/">07-文件上传与进度条</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/03/ajax/06-XMLHttpRequest2.0新特性/">06-XMLHttpRequest2.0新特性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/ajax/05-同步和异步/">05-同步和异步</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/ajax/04-GET缓存/">04-GET缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/ajax/03-POST和GET的区别/">03-POST和GET的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/ajax/02-Ajax入门/">02-Ajax入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/02/ajax/01-Ajax技术/">01-Ajax 技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/27/PHP/28-cookie和session的联系/">28-session和cookie的联系</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/27/PHP/27-session技术/">27-session技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/27/PHP/26-cookie技术/">26-cookie技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/27/PHP/25-PHP会话控制/">25-PHP会话控制概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/27/PHP/24-修改信息于登录/">24-学生信息管理系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/26/PHP/23-信息管理系统/">23-学生信息管理系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/26/PHP/22-PHP操作MySQL/">22-PHP操作MySQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/26/PHP/21-删除数据/">21-删除数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/26/PHP/20-修改数据/">20-修改数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/26/PHP/19-添加数据/">19-添加数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/26/PHP/18-数据查询/">18-数据查询</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/PHP/17-关系型数据库介绍/">17-创建数据表</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/PHP/16-创建数据表/">16-创建数据表</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/PHP/15-创建、删除数据库/">15-创建/删除数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/PHP/14-MySQL数据库服务器/">14-MySQL数据库服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/PHP/13-Http协议/">13-Http协议</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/25/PHP/12-PHP文件读写/">12-PHP文件读写</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/PHP/11-PHP常用函数/">11-PHP函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/PHP/10-PHP函数/">10-PHP函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/PHP/09-PHP文件上传/">09-PHP文件上传</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/PHP/08-PHP超全局变量/">08-PHP超全局变量</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/PHP/07-PHP数组/">07-PHP数组</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/PHP/06-PHP流程控制/">06-PHP流程控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/PHP/05-PHP变量、常量、运算符/">05-PHP变量</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/PHP/04-PHP运行原理/">04-PHP运行原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/PHP/03-PHP初识/">03-PHP介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/PHP/02-PHP安装环境/">02-PHP安装环境 （phpstudy）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/22/PHP/01-PHP介绍/">01-PHP介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/26/jQuery/16-jQuery操作DOM节点/">16-jquery操作DOM(节点)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/25/jQuery/15-jQuery动画/">15-jquery动画</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/25/jQuery/14-jQuery操作样式/">14-jQuery操作样式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/jQuery/13-jQuery插件机制/">13-jQuery插件机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/jQuery/12-jQuery多库共存/">12-jQuery多库共存</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/jQuery/11-jQuery链式编程与隐式迭代/">11-jQuery链式编程与隐式迭代</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/jQuery/10-jQuery事件对象/">10-jQuery事件对象（）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/24/jQuery/09-jQuery的on事件绑定与解绑/">09-jQuery的on事件绑定与解绑</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/23/jQuery/08-jQuery事件机制/">08-jQuery事件机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/23/jQuery/07-jQuery操作坐标值/">07-jQuery操作坐标值</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/jQuery/06-jQuery操作尺寸/">06-jQuery操作尺寸</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/jQuery/05-jQuery操作值与内容/">05-jQuery操作值与内容</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/jQuery/04-jQuery操作DOM/">04-jQuery操作DOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/21/jQuery/03-jQuery选择器/">03-jQuery选择器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/21/jQuery/02-jQuery入口函数/">02-jQuery入口函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/21/jQuery/01-jQuery简介/">01-jQuery简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/19/JS/40-伪数组和数组/">40-伪数组和数组</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/18/JS/39-正则表达式/">39-正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/17/JS/38-函数递归/">38-函数递归</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/16/JS/37-闭包/">37-闭包</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/15/JS/36-作用域、作用域链、预解析/">36-作用域、作用域链、预解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/15/JS/35-函数进阶/">35-函数进阶</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/14/JS/34-继承与多态/">34-继承与多态</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/13/JS/33-原型/">33-原型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/13/JS/32-构造函数/">32-构造函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/JS/31-创建对象/">31-创建对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/JS/30-面向对象/">30-面向对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/11/JS/29-回顾掌握/">29-回顾掌握</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/10/JS/28-轮播图/">28-js原生轮播图</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/09/JS/27-动画运动/">27-动画运动</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/08/JS/26-定时器/">26-定时器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/07/JS/25-异步任务/">25-异步任务</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/07/JS/24-offset系列/">24-offset系列</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/06/JS/23-location与navigator与history对象/">23-location与navigator与history对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/02/JS/22-BOM.window对象/">22-BOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/01/JS/21-事件流/">21-事件流</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/01/JS/20-注册事件/">20-注册事件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/01/JS/19-节点/">19-节点</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/JS/18-表单属性与事件/">18-表单属性与事件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/JS/17-兼容性/">17-兼容性问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/JS/16-事件/">16-事件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/JS/15-Web API介绍/">15-Web API 简单介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/JS/12-Date类型对象/">12-Date类型对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/JS/14-String类型对象/">14-String类型对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/JS/13-Array类型对象/">13-Array类型对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/23/JS/11-内置对象/">11-内置对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/23/JS/10-基本数据类型和引用数据类型/">10-基本数据类型和引用数据类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/JS/09-对象/">09-对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/21/JS/08-函数/">08-函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/JS/07-数组/">07-数组</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/JS/06-流程控制/">06-流程控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/JS/05-数据类型转换/">05-数据类型转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/JS/04-运算符/">04-运算符</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/JS/03-数据类型/">03-数据类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/JS/02-变量/">02-变量</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/JS/01-Js组成、输出、书写方式、调试循序与规范  /">01-Js组成、输出、书写方式、调试循序与规范</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/16/HTML/13-伸缩布局/">11-伸缩布局【弹性布局】(display:flex;)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/15/HTML/12-动画/">10-动画(animation)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/14/HTML/11-3D转换/">09-3D转换(transform)【变形】</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/14/HTML/10-2D转换/">08-2D转换(transform)【变形】</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/13/HTML/09-过渡/">07-过渡（transition）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/HTML/08-Web字体/">06-Web字体</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/HTML/07-Logo内容移除/">05-Logo内容移除</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/HTML/06-定位/">04-定位</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/HTML/05-浮动/">03-浮动</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/HTML/04-渐变与盒子模型/">02-渐变与盒模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/HTML/03-css基础/">01-CSS 基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/HTML/02-列表/">02-列表</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/HTML/01-HTML基础/">01-HTML基础</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 好久不见
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg,"background-repeat":"no-repeat", "background-attachment": "fixed","background-size": "cover"});//fixed
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
             title: "a.article-title, .article-more-link a", 
            
             tags: ".article-tag a", 
             categories: ".article-category a, a.tag-list-link", 
             articleNav: "#article-nav a, #post-nav-button a", 
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
             menu: ".header-menu a", 
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>